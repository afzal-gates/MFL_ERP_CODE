<ul class="page-breadcrumb breadcrumb">
    <li>
        <a href="index.html">MultiTex ERP</a>

    </li>
    <li>
        <a href="#">Cutting</a>

    </li>
    <li>
        <a href="#" ng-bind="vm.Title"></a>
    </li>
</ul>

<div class="portlet box blue-dark">
    <div class="portlet-title">
        <div class="caption">
            {{vm.Title}}
        </div>
        <div class="tools">
        </div>

        <div class="actions">
        </div>
    </div>

    <div class="portlet-body">
        <alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)"><h4 style="margin:0px;">{{alert.msg}}</h4></alert>


        <table class="table table-condensed table-striped table-bordered" style="padding-left: 5px; padding-right: 5px; margin-bottom: 3px;">
            <tbody>
                <tr>
                    <td style="width: 30%; padding-bottom: 0px; padding-bottom: 0px;">
                        <form name="frmBndlCardAmend" ng-submit="vm.submitData(BUNDLE_BARCODE, frmBndlCardAmend.$valid)">

                            <div class="form-group" ng-class="{'has-error': frmBndlCardAmend.$invalid }">
                                <input type="text" class="form-control" ng-model="BUNDLE_BARCODE" name="BUNDLE_BARCODE" style="height:28px;" focus-me="true" check-bundl-card placeholder="Bundle Card" ng-maxlength="15" ng-minlength="15" autocomplete="off">

                                <button type="submit" ng-disabled="frmBndlCardAmend.BUNDLE_BARCODE.$pending" style="display:none;"></button>
                            </div>
                        </form>
                    </td>

                    <td style="width: 40%;  border-left: hidden; padding-bottom: 0px;">
                        @*<div class="help-block" style="background-color: red; font-size: 13px; color: white; padding: 5px; " ng-if="frmBndlCardAmend.BUNDLE_BARCODE.$dirty && frmBndlCardAmend.BUNDLE_BARCODE.$error.AlreadyScanned">
                            <b>Bundle Already Scanned</b>
                        </div>*@
                        <div class="help-block" style="background-color: blue; font-size: 13px; color: white; padding: 5px; " ng-if="frmBndlCardAmend.BUNDLE_BARCODE.$dirty && frmBndlCardAmend.BUNDLE_BARCODE.$pending">
                            Checking...
                        </div>

                        <div class="help-block" style="background-color: red; font-size: 13px; color: white; padding: 5px; " ng-if="frmBndlCardAmend.BUNDLE_BARCODE.$dirty && (frmBndlCardAmend.BUNDLE_BARCODE.$error.invalid_barcode||frmBndlCardAmend.BUNDLE_BARCODE.$error.maxlength||frmBndlCardAmend.BUNDLE_BARCODE.$error.minlength)">
                            <b>Invalid Barcode</b>
                        </div>


                    </td>

                    <td style="width: 30%; text-align: right; border-left: hidden; padding-bottom: 0px;">

                        <h4 class="block" style="margin:0px;">
                            <span class="label label-primary">
                                <b>{{vm.dataList[0].TOT_REC}}</b>
                            </span>
                            Bundle Scanned
                            <a class="btn btn-xs purple-intense" ng-click="vm.openDefectModal()">
                                <i class="fa fa-list-alt"></i> Finalize
                            </a>
                        </h4>
                    </td>
                </tr>
            </tbody>
        </table>


   
        <fieldset class="custom-fieldset" style="padding-top: 0px;padding-bottom: 0px;" ng-if="vm.LastBundle.GMT_CUT_BNDL_AMND_ID">
            <legend class="custom-legend">Last Scanned Bundle(Scan)</legend>
            <table class="table table-condensed table-striped table-bordered" style="padding:5px;">
                <tbody>
                    <tr>
                        <td style="width:16%">
                            <b>Buyer</b>
                        </td>

                        <td style="width: 8%" colspan="2">
                            {{vm.LastBundle.BYR_ACC_GRP_NAME_EN}}
                        </td>

                        <td style="width: 16%" colspan="2">
                            <b>Style</b>
                        </td>

                        <td style="width:16%" colspan="2">
                            {{vm.LastBundle.WORK_STYLE_NO}}
                        </td>

                        <td style="width: 8%">
                            <b>Order</b>
                        </td>


                        <td style="width: 8%">
                            {{vm.LastBundle.ORDER_NO}}
                        </td>
                        <td style="width: 4%">
                            <b>Item</b>
                        </td>

                        <td style="width: 12%" colspan="2">
                            {{vm.LastBundle.ITEM_NAME_EN}}
                        </td>


                        <td style="width: 4%">
                            <b>Cntry</b>
                        </td>

                        <td style="width: 4%">
                            {{vm.LastBundle.COUNTRY_NAME_EN}}
                        </td>
                    </tr>

                    <tr>
                        <td style="width: 8%">
                            <b>Color</b>
                        </td>

                        <td style="width:16%" colspan="2">
                            {{vm.LastBundle.COLOR_NAME_EN}}
                        </td>
                        <td style="width:5%;color:red;">
                            <b>CutNo</b>
                        </td>

                        <td style="width:5%">
                            {{vm.LastBundle.CUTNG_NO}}
                        </td>
                        
                        <td style="width: 5%; color: red; ">
                            <b>Size</b>
                        </td>
                        
                        <td style="width:8%">
                            {{vm.LastBundle.SIZE_CODE}}
                        </td>
                        <td style="width: 8%; color: red;">
                            <b>Bundle No</b>
                        </td>
                        
                        <td style="width:8%">
                            {{vm.LastBundle.BUNDLE_NO}}
                        </td>

                        <td style="width: 4%; color: red;">
                            <b>Serial</b>
                        </td>

                        <td style="width: 12%;" colspan="2">
                            {{vm.LastBundle.SL_RANGE_TXT}}
                        </td>
                        
                        <td style="width: 8%; color: red;">
                            <b>Quantity</b>

                        </td>

                        <td style="width: 8%">
                            {{vm.LastBundle.QTY_IN_BNDL}}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="14" align="center">
                            <a class="btn btn-xs btn-block btn-default" style="width:50%;" ng-click="vm.removeBndlAmnd(vm.LastBundle.GMT_CUT_BNDL_AMND_ID)">
                                <i class="fa fa-times"></i> Remove
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>

        </fieldset>


        <fieldset class="custom-fieldset" style="padding-top: 0px;padding-bottom: 5px;">
            <legend class="custom-legend">Scanned Bundle List</legend>

            <table class="table table-condensed table-striped table-bordered" style="padding:5px;" ng-repeat="item in vm.dataList">

                <thead>
                    <tr>
                        <th colspan="10" style="border: 1px solid #cecece;font-weight:900;">
                            Buyer: {{item.BYR_ACC_GRP_NAME_EN}}>> Style: {{item.STYLE_NO}}>> Order: {{item.ORDER_NO}}>> Color: {{item.COLOR_NAME_EN}}>>Cutting No: {{item.CUTNG_NO}}
                        </th>


                    </tr>
                    

                    <tr>
                        
                        <th style="width:10%;">
                            <small>
                                <b>Barcode</b>
                            </small>
                        </th>

                        <th style="width:20%;">
                            <small>
                                <b>Item</b>
                            </small>

                        </th>

                        <th style="width:10%;">
                            <small>
                                <b>Country</b>
                            </small>

                        </th>

                        <th style="width:10%;">
                            <small>
                                <b>Size</b>
                            </small>

                        </th>

                        <th style="width:5%;">
                            <small>
                                <b>B.No</b>
                            </small>

                        </th>

                        <th style="width:8%;">
                            <small>
                                <b>Lot No</b>
                            </small>

                        </th>

                        <th style="width:17%;">
                            <small>
                                <b>Serial</b>
                            </small>

                        </th>


                        <th style="width:5%;">
                            <small>
                                <b>Bndl Qty</b>
                            </small>

                        </th>
                        <th style="width:5%;">
                            <small>
                                <b>Action</b>
                            </small>
                        </th>
                    </tr>
                </thead>

                <tbody>
                    <tr ng-repeat="itm in item.bndlAmndDtl">
                        
                        <td>
                            {{itm.BUNDLE_BARCODE}}
                        </td>

                        <td>
                            {{itm.ITEM_NAME_EN}}
                        </td>

                        <td>
                            {{itm.COUNTRY_NAME_EN}}
                        </td>

                        <td>
                            {{itm.SIZE_CODE}}
                        </td>
                        <td>
                            {{itm.BUNDLE_NO}}
                        </td>

                        <td>
                            {{itm.DYE_LOT_NO}}
                        </td>

                        <td>
                            {{itm.SL_RANGE_TXT}}

                        </td>

                        <td>
                            {{itm.QTY_IN_BNDL}}
                        </td>
                        <td>
                            <a class="btn btn-xs btn-danger" ng-click="vm.removeBndlAmnd(itm.GMT_CUT_BNDL_AMND_ID)">
                                <i class="fa fa-times"></i> Remove
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </fieldset>
        
        <div class="row" style="margin:auto;padding-top:10px;" ng-if="vm.errors">
            <div class="col-md-5 col-md-offset-2">
                <div class="alert alert-warning" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>
                    <ul ng-repeat="field in vm.errors">
                        <li ng-repeat="error in field" ng-bind="error"></li>
                    </ul>
                </div>
            </div>
        </div>

    </div>
</div>