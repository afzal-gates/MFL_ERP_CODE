<div class="modal-body">
    <div class="portlet grey-cascade box">
        <alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)">{{alert.msg}}</alert>

        <div class="portlet-title">
            <div>
                <h3 style="padding-top:10px;margin-top:3px;">
                    Search: Delivery Challan
                    <span class="pull-right"><i class="fa fa-times red" ng-click="cancel()"></i></span>
                </h3>
            </div>
        </div>
        <div class="portlet-body">

            <table class="table table-condensed table-striped borderless" style="margin-bottom:5px;">

                <thead>
                    <tr style="border: 1px solid #cecece;">

                        <th style="width:10%">
                            Challan
                            <input type="text" ng-model="vm.form.CHALAN_NO" placeholder="Search..."
                                   typeahead="item.CHALAN_NO as item.CHALAN_NO for item in challanAuto($viewValue)"
                                   typeahead-min-length="3" typeahead-wait-ms="1000"
                                   typeahead-on-select="onSelectItem($item)" typeahead-loading="loadingLocations" class="form-control">
                            <i ng-show="loadingLocations" class="glyphicon glyphicon-refresh"></i>
                            
                        </th>

                        <th style="width:8%">
                            Date
                            <input type="text" class="form-control" ng-click="vm.chlnDateOpen($event)" datepicker-popup="{{vm.dtFormat}}" 
                                   name="CHALAN_DT" ng-model="vm.form.CHALAN_DT" is-open="vm.chlnDateOpened" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" close-text="Close" />
                        </th>

                        <th style="width:13%">
                            Buyer A/C
                            <select kendo-drop-down-list name="MC_BYR_ACC_GRP_ID" class="form-control" k-filter="'contains'" k-option-label="'-- Select --'"
                                    k-options="vm.buyerAcGrpList" ng-model="vm.form.MC_BYR_ACC_GRP_ID"
                                    k-data-text-field="'BYR_ACC_GRP_NAME_EN'" k-data-value-field="'MC_BYR_ACC_GRP_ID'"
                                    k-auto-bind="'true'" k-on-change=""></select>
                        </th>

                        <th style="width:24%">
                            Style/Order
                            <select kendo-drop-down-list name="MC_STYLE_H_EXT_ID" class="form-control" k-filter="'contains'" k-option-label="'-- Select --'"
                                    k-template="vm.styleExtTemplate" k-value-template="vm.styleExtValueTemplate"
                                    k-data-source="vm.styleExtDataSource" k-options="vm.styleExtOption" ng-model="vm.form.MC_ORDER_H_ID"
                                    k-data-text-field="'ORDER_NO'" k-data-value-field="'MC_ORDER_H_ID'"
                                    k-auto-bind="'true'"></select>
                        </th>
                        
                        <th style="width:15%">
                            Color
                            <select kendo-drop-down-list name="MC_COLOR_ID" class="form-control" k-filter="'contains'" k-option-label="'-- Select --'"
                                    k-data-source="vm.orderColorListDataSource" ng-model="vm.form.MC_COLOR_ID"
                                    k-data-text-field="'COLOR_NAME_EN'" k-data-value-field="'MC_COLOR_ID'" k-auto-bind="'true'"></select>
                        </th>

                        
                        <th style="width:8%">
                            Line
                            <select kendo-drop-down-list name="HR_PROD_LINE_ID" class="form-control" k-filter="'contains'" k-option-label="'-- Select --'"
                                    k-options="vm.lineList" ng-model="vm.form.HR_PROD_LINE_ID"
                                    k-data-text-field="'LINE_CODE'" k-data-value-field="'HR_PROD_LINE_ID'"
                                    k-auto-bind="'true'" k-on-change=""></select>
                        </th>

                        <th style="width:5%">
                            Bag Tag
                            <select kendo-drop-down-list name="IS_TAG" class="form-control" k-filter="'contains'" k-option-label="'-- Select --'"
                                    k-data-source="vm.bagTagList" ng-model="vm.form.IS_TAG"
                                    k-data-text-field="'TAG_NAME'" k-data-value-field="'IS_TAG'"
                                    k-auto-bind="'true'" k-on-change=""></select>
                        </th>

                        <th style="width:10%">
                            Status
                            <select kendo-drop-down-list name="IS_FINALIZED" class="form-control" k-filter="'contains'" k-option-label="'-- Select --'"
                                    k-data-source="vm.statusList" ng-model="vm.form.IS_FINALIZED"
                                    k-data-text-field="'STATUS_NAME'" k-data-value-field="'IS_FINALIZED'"
                                    k-auto-bind="'true'" k-on-change=""></select>
                        </th>

                        <th style="width:7%"> 
                            &nbsp;                           
                            <button type="button" class="btn btn-sm blue" ng-click="vm.searchChallan()"><i class="fa fa-search"></i> Search</button>
                        </th>

                    </tr>

                </thead>
            </table>

            <table class="table table-condensed table-striped table-bordered" style="padding:5px;">

                <thead>
                    <tr class="site-table-header">
                        <th style="width:10%;">
                            <small>
                                Challan No
                            </small>

                        </th>

                        <th style="width: 12%;">
                            <small>
                                Buyer
                            </small>

                        </th>

                        <th style="width: 15%;">
                            <small>
                                Style
                            </small>

                        </th>

                        <th style="width: 15%;">
                            <small>
                                Order
                            </small>

                        </th>

                        <th style="width:12%;">
                            <small>
                                Item
                            </small>

                        </th>

                        <th style="width:10%;">
                            <small>
                                Color
                            </small>
                        </th>
                        <th style="width:8%;">
                            <small>
                                Line
                            </small>
                        </th>

                        <th style="width:5%;">
                            <small>
                                Cutting#
                            </small>
                        </th>
                       
                        <th style="width:5%;">
                            <small>
                                #of Bndl
                            </small>

                        </th>

                        
                        <th style="width:5%;">
                            <small>
                                Qty
                            </small>
                        </th>
                        <th style="width:3%;">
                           <small>Act</small>
                        </th>

                    </tr>
                </thead>

                <tbody>
                    <tr ng-repeat="itm in vm.challanList">
                        <td rowspan="{{itm.CHALLAN_ROW_SPAN}}" ng-show="itm.CHALLAN_ROW_SL==1">
                            {{itm.CHALAN_NO}}
                            <br />
                            <span class="label label-sm label-primary" style="font-style:italic" >{{itm.STATUS_NAME}}</span>
                        </td>

                        <td>
                            {{itm.BYR_ACC_GRP_NAME_EN}}
                        </td>

                        <td>
                            {{itm.JOB_NO}}
                        </td>
                        <td>
                            {{itm.ORDER_NO}}
                        </td>
                        <td>
                            {{itm.ITEM_SNAME}}
                        </td>
                        <td>
                            {{itm.COLOR_NAME_EN}}
                        </td>
                        <td>
                            {{itm.LINE_CODE}}
                        </td>
                        <td>
                            {{itm.CUTNG_NO}}
                        </td>


                        <td>
                            {{itm.NO_OF_BNDL_SCANNED}}
                        </td>

                        <td>
                            {{itm.FINAL_QTY}}
                        </td>

                       
                        <td rowspan="{{itm.CHALLAN_ROW_SPAN}}" ng-show="itm.CHALLAN_ROW_SL==1">
                            <a class="btn btn-xs bg-grey-cascade" ng-click="vm.selectChallan(itm)" @*href="/Cutting/Cutting/DeliveryChallan?a=416/#/SewDelChallanList?pGMT_CUT_SEW_DLV_CHL_ID={{itm.GMT_CUT_SEW_DLV_CHL_ID}}"*@>
                                <i class="fa fa-send-o"></i> Select
                            </a>
                        </td>

                    </tr>

                    <tr>
                        <td colspan="8" style="text-align:right"><b>Total</b></td>
                        <td><b>{{vm.TTL_NO_OF_BNDL_SCANNED}}</b></td>
                        <td><b>{{vm.TTL_FINAL_QTY}}</b></td>
                        <td></td>
                    </tr>

                </tbody>
            </table>
        </div>
    </div>
</div>