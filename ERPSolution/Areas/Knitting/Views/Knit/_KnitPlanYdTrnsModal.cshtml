<div class="modal-body">
    <div class="portlet grey-cascade box">
        <div class="portlet-title">
            <div>
                <h3 style="padding-top:10px;margin-top:3px;">
                    Knitting Program (Y/D)
                    <span class="pull-right"><i class="fa fa-times red" ng-click="cancel()"></i></span>
                </h3>
            </div>
        </div>
        <div class="portlet-body">
            <form name="KnitPlanParameter" novalidate class="form-horizontal">
                <div class="row">
                    <div class="col-md-12" style="padding-left:5px;">

                        <table class="table table-condensed table-striped table-bordered" style="padding: 5px;margin-bottom: 5px;">
                            <thead>
                                <tr class="site-table-header">
                                    <th style="width:10%;">
                                        <small>
                                            Buyer A/C
                                        </small>

                                    </th>

                                    <th style="width:10%;">
                                        <small>
                                            Style #
                                        </small>

                                    </th>

                                    <th style="width:15%;">
                                        <small>
                                            Order #
                                        </small>

                                    </th>


                                    <th style="width:20%;">
                                        <small>
                                            Fabrication
                                        </small>

                                    </th>

                                    <th style="width:10%;">
                                        <small>
                                            Color Name
                                        </small>

                                    </th>

                                    <th style="width:6%;">
                                        <small>
                                            Fin. GSM
                                        </small>
                                    </th>


                                    <th style="width:6%;">
                                        <small>
                                            Fin Dia
                                        </small>
                                    </th>
                                </tr>
                            </thead>

                            <tbody>
                                <tr>
                                    <td>
                                        {{data.BYR_ACC_NAME_EN}}
                                    </td>

                                    <td>
                                        {{data.WORK_STYLE_NO}}
                                    </td>

                                    <td>
                                        {{data.ORDER_NO_LIST}}
                                    </td>

                                    <td>
                                        {{data.FABRIC_SNAME}}
                                        <a class="btn btn-xs grey-mint" style="display:block;" ng-click="vm.editFabrication(data);" ng-if="data.KNT_PLAN_H_ID < 1">
                                            <i class="fa fa-pencil"></i> Change Fabrication
                                        </a>
                                    </td>

                                    <td>
                                        {{data.COLOR_NAME_EN}}
                                    </td>
                                    <td>
                                        {{data.FIN_GSM}}
                                    </td>

                                    <td>
                                        {{data.FIN_DIA_N_DIA_TYPE}}
                                    </td>

                                </tr>
                            </tbody>

                        </table>

                        <fieldset class="custom-fieldset" style="padding-top: 0px;padding-bottom: 0px;">
                            <legend class="custom-legend"> Knit Plan Parameter</legend>
                            <div class="form-group">
                                @*<label class="col-md-1 control-label">
                                        Plan Ref#
                                    </label>
                                    <div class="col-md-2">
                                        <input type="text" class="form-control" ng-model="data.KNT_PLAN_NO" disabled />
                                    </div>*@

                                <label class="col-md-1 control-label">
                                    Plan DT
                                </label>
                                <div class="col-md-1" style="padding-right:0px;padding-left:0px;" ng-class="{'has-error': (KnitPlanParameter.KNT_PLAN_DT.$touched || KnitPlanParameter.$submitted) && KnitPlanParameter.KNT_PLAN_DT.$error.required}">
                                    <input type="text" class="form-control" ng-click="vm.KNT_PLAN_DT_OPEN($event)" datepicker-popup="{{vm.dtFormat}}"
                                           name="KNT_PLAN_DT" ng-model="data.KNT_PLAN_DT" is-open="vm.KNT_PLAN_DT_OPENED" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" required close-text="Close" />
                                </div>
                                <label class="col-md-1 control-label">
                                    DiaXGauge
                                </label>
                                <div class="col-md-3" ng-class="{'has-error': (KnitPlanParameter.KNT_MC_DIA_ID.$touched || KnitPlanParameter.$submitted) && (KnitPlanParameter.KNT_MC_DIA_ID.$error.required||KnitPlanParameter.LK_MC_GG_ID.$error.required)}">
                                    <div class="col-md-6" style="padding-left:0px;padding-right:0px;">
                                        <select class="form-control" kendo-drop-down-list name="KNT_MC_DIA_ID" k-option-label="'--M/C Dia--'" k-filter="'Contains'"
                                                k-data-text-field="'MC_DIA'" k-data-value-field="'KNT_MC_DIA_ID'"
                                                k-auto-bind="'true'" k-data-source="vm.machineDiaDs" k-ng-delay="vm.machineDiaDs" ng-model="data.KNT_MC_DIA_ID" required></select>
                                    </div>
                                    <div class="col-md-6">
                                        <select class="form-control" kendo-drop-down-list name="LK_MC_GG_ID" k-option-label="'--Gauge--'" k-filter="'contains'"
                                                k-data-text-field="'LK_DATA_NAME_EN'" k-data-value-field="'LOOKUP_DATA_ID'"
                                                k-auto-bind="'true'" k-data-source="vm.MachineGaugeListDs" k-ng-delay="vm.MachineGaugeListDs" ng-model="data.LK_MC_GG_ID" required></select>
                                    </div>

                                </div>

                                <label class="col-md-1 control-label">
                                    Fin Dia
                                </label>
                                <div class="col-md-3" ng-class="{'has-error':
                                   (KnitPlanParameter.LK_DIA_TYPE_ID.$touched||KnitPlanParameter.DIA_MOU_ID.$touched||KnitPlanParameter.FIN_DIA.$touched||KnitPlanParameter.$submitted) &&
                                  (   KnitPlanParameter.DIA_MOU_ID.$error.required
                                    ||KnitPlanParameter.LK_DIA_TYPE_ID.$error.required
                                    ||KnitPlanParameter.LK_MC_GG_ID.$error.required
                                    ||KnitPlanParameter.FIN_DIA.$error.required
                                    ||KnitPlanParameter.FIN_DIA.$error.min
                                  )}">

                                    <div class="col-md-4" style="padding-left:0px;padding-right:3px;">
                                        <input type="number" name="FIN_DIA" class="form-control" ng-required="!(data.RF_FAB_PROD_CAT_ID==1||data.RF_FAB_PROD_CAT_ID==3)" ng-model="data.FIN_DIA" min="{{(data.RF_FAB_PROD_CAT_ID==1||data.RF_FAB_PROD_CAT_ID==3)?0:1}}" />
                                    </div>

                                    <div class="col-md-4" style="padding-left:0px;padding-right:3px;">
                                        <select class="form-control" kendo-drop-down-list name="DIA_MOU_ID" k-option-label="'-- Select --'"
                                                k-data-text-field="'MOU_CODE'" k-data-value-field="'RF_MOU_ID'"
                                                k-data-source="vm.mouList" ng-model="data.DIA_MOU_ID" required></select>
                                    </div>
                                    <div class="col-md-4" style="padding-left:0px;padding-right:0px;">
                                        <select class="form-control" kendo-drop-down-list name="LK_DIA_TYPE_ID" k-option-label="'-- Select --'"
                                                k-data-text-field="'LK_DATA_NAME_EN'" k-data-value-field="'LOOKUP_DATA_ID'"
                                                k-data-source="vm.diaTypeList" ng-model="data.LK_DIA_TYPE_ID" required></select>
                                    </div>

                                </div>
                                <label class="col-md-1 control-label">
                                    Fin GSM
                                </label>
                                <div class="col-md-1" ng-class="{'has-error': (KnitPlanParameter.FIN_GSM.$touched || KnitPlanParameter.$submitted) && (KnitPlanParameter.FIN_GSM.$error.required||KnitPlanParameter.FIN_GSM.$error.min)}">
                                    <input type="text" class="form-control" readonly="readonly" ng-model="data.FIN_GSM" required />
                                </div>

                                @*<label class="col-md-1 control-label">
                                        Gauge
                                    </label>
                                    <div class="col-md-1" ng-class="{'has-error': (KnitPlanParameter.LK_MC_GG_ID.$touched || KnitPlanParameter.$submitted) && KnitPlanParameter.LK_MC_GG_ID.$error.required}">
                                        <select class="form-control" kendo-drop-down-list name="LK_MC_GG_ID" k-option-label="'--Gauge--'" k-filter="'contains'"
                                                k-data-text-field="'LK_DATA_NAME_EN'" k-data-value-field="'LOOKUP_DATA_ID'"
                                                k-auto-bind="'true'" k-data-source="vm.MachineGaugeListDs" k-ng-delay="vm.MachineGaugeListDs" ng-model="data.LK_MC_GG_ID" required></select>
                                    </div>*@

                            </div>
                            <div class="form-group">
                                <label class="col-md-1 control-label">
                                    Rate
                                </label>
                                <div class="col-md-4" style="padding-right:0px;padding-left:0px;" ng-class="{'has-error': (KnitPlanParameter.MC_FAB_PROC_RATE_ID.$touched || KnitPlanParameter.$submitted) && KnitPlanParameter.MC_FAB_PROC_RATE_ID.$error.required}">
                                    <select class="form-control" kendo-drop-down-list name="MC_FAB_PROC_RATE_ID" k-option-label="'-- Rate --'"
                                            k-data-text-field="'FAB_PROC_NAME'" k-data-value-field="'MC_FAB_PROC_RATE_ID'" k-filter="'contains'"
                                            k-auto-bind="'true'" k-data-source="vm.RateDs"
                                            ng-model="data.MC_FAB_PROC_RATE_ID"
                                            k-on-data-bound="vm.onRateOnBound(kendoEvent,data)" k-template="vm.rateTemplate" k-value-template="vm.rateTemplate" ng-disabled="data.IS_FINALIZED=='Y'"></select>
                                </div>

                                <div class="col-md-2 col-md-offset-1" style="padding-left:0px;">
                                    <div class="checkbox-list">
                                        <label class="checkbox-inline" style="margin-left:20px;margin-top:-10px;">
                                            <span><input type="checkbox" ng-model="data.IS_FINALIZED_SC" ng-true-value="'Y'" ng-false-value="'N'" ng-disabled="data.IS_FINALIZED=='Y'"></span> Finalized?
                                        </label>

                                        <label class="checkbox-inline" style="margin-top:-10px;">
                                            <span><input type="checkbox" ng-model="data.IS_PLAN_NOTE" ng-true-value="'Y'" ng-false-value="'N'"></span> Note?
                                        </label>
                                    </div>
                                </div>


                            </div>

                            <div class="form-group" ng-show="data.IS_PLAN_NOTE=='Y'">
                                <label class="col-md-1 control-label">
                                    Plan Note
                                </label>
                                <div class="col-md-10">
                                    <textarea rows="5" name="PLAN_NOTE" class="form-control" cols="50" ng-model="data.PLAN_NOTE"></textarea>
                                </div>
                            </div>

                            <alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)"><h4 style="margin:0px;">{{alert.msg}}</h4></alert>

                            <p class="block" style="margin: 0px; font-size: 14px;text-align:right; background-color: rgb(236, 233, 248); padding-left: 2px;">
                                Required Qty:
                                <b>{{data.RQD_GFAB_QTY}}</b>
                                &nbsp;
                                Adjusted Qty:
                                <b style="color: blue;">{{data.GFAB_ADJ_QTY}}</b>

                                &nbsp;
                                Production:
                                <b style="color:blue;">{{data.GFAB_PROD_QTY}}</b>
                                <span class="badge badge-primary"><b>{{(data.GFAB_PROD_QTY/(data.RQD_GFAB_QTY-data.GFAB_ADJ_QTY))*100|number:2 }}</b></span>

                                &nbsp;
                                Left To KP :
                                <b style="color:red;">{{data.BAL_GFAB_QTY}}</b>
                            </p>

                            <div class="row" style="margin:auto;" ng-if="(data.IS_FBP_VISIBLE=='Y' || data.IS_ELA_MXD=='Y'||data.RF_FAB_TYPE_ID==33)">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">
                                        Assign Qty
                                    </label>
                                    <div class="col-md-2">
                                        <input type="number" class="form-control" ng-model="data.ASSIGN_QTY" />
                                    </div>
                                    <div class="col-md-8" style="text-align:left;">
                                        <a class="btn btn-xs btn-inverse" ng-click="vm.onQtyChange(data)"> <i class="fa fa-calculator"></i>Calculate</a>
                                    </div>
                                </div>
                            </div>
                            <table class="table table-condensed table-striped table-bordered" style="padding:5px;">
                                <thead>
                                    <tr class="site-table-header">
                                        <th style="width:2%;">
                                            <small>
                                                Yd?
                                            </small>

                                        </th>

                                        <th style="width:20%;">
                                            <small>
                                                Yarn
                                            </small>

                                        </th>
                                        <th style="width:2%;">
                                            <small>
                                                Dbl?
                                            </small>

                                        </th>

                                        <th style="width:10%;">
                                            <small>
                                                Brand
                                            </small>

                                        </th>

                                        <th style="width:10%;">
                                            <small>
                                                Yarn Lot
                                            </small>

                                        </th>


                                        <th style="width:10%;" ng-if="(data.IS_FBP_VISIBLE=='Y'||data.RF_FAB_TYPE_ID==33)">
                                            <small>
                                                Part
                                            </small>

                                        </th>

                                        <th style="width:10%;">
                                            <small>
                                                Stitch Len
                                            </small>
                                        </th>

                                        <th style="width:5%;" ng-if="data.IS_FBP_VISIBLE=='Y' || data.IS_ELA_MXD=='Y'||data.RF_FAB_TYPE_ID==33">
                                            <small>
                                                Ratio(%)
                                            </small>

                                        </th>

                                        <th style="width:6%;">
                                            <small>
                                                Assi.Yrn
                                            </small>

                                        </th>
                                        <th style="width:4%;" ng-if="(data.RF_FAB_PROD_CAT_ID==1||data.RF_FAB_PROD_CAT_ID==3)">
                                            <small>
                                                Yrn Src
                                            </small>
                                        </th>

                                        <th style="width:15%;">
                                            <small>
                                                Note
                                            </small>

                                        </th>
                                        <th style="width:5%;">
                                            <small>Action</small>
                                        </th>
                                    </tr>
                                </thead>

                                <tbody>


                                    <tr ng-repeat="item in data.items">
                                        <td>
                                            <input type="checkbox" name="IS_SOLID" ng-model="item.IS_SOLID" ng-change="vm.onChangeIsSolid(item,$index)" ng-true-value="'Y'" ng-false-value="'S'" />
                                        </td>


                                        <td ng-class="{'has-error': (YARN_ITEM_ID_FORM.YARN_ITEM_ID.$touched || KnitPlanParameter.$submitted || !item.YARN_ITEM_ID_V ) && YARN_ITEM_ID_FORM.YARN_ITEM_ID.$error.required}">

                                            <ng-form name="YARN_ITEM_ID_FORM">
                                                <select class="form-control" kendo-drop-down-list name="YARN_ITEM_ID" k-option-label="'-- Select Yarn Item --'" ng-disabled="item.KNT_PLAN_D_ID>0"
                                                        k-data-text-field="'ITEM_NAME_EN'" k-data-value-field="'YARN_ITEM_ID'" k-filter="'contains'"
                                                        k-auto-bind="'true'" k-data-source="(item.IS_SOLID=='S'?vm.yarnItemListDs[$index]:vm.yarnItemListDsYd[$index])" k-ng-delay="(item.IS_SOLID=='S'?vm.yarnItemListDs[$index]:vm.yarnItemListDsYd[$index])" ng-model="item.YARN_ITEM_ID"
                                                        k-on-change="vm.onChangeYarnItem(item,kendoEvent,true,$index)" required k-template="vm.Yarntemplate" k-on-data-bound="vm.onBoundYarnItem(item,true,$index)"></select>
                                            </ng-form>

                                        </td>

                                        <td>
                                            <input type="checkbox" name="IS_DBL_PLY" ng-model="item.IS_DBL_PLY" ng-true-value="'Y'" ng-false-value="'N'" />
                                        </td>


                                        <td ng-class="{'has-error': (RF_BRAND_ID_FORM.YARN_ITEM_ID.$touched || KnitPlanParameter.$submitted || !item.RF_BRAND_ID_V ) && RF_BRAND_ID_FORM.YARN_ITEM_ID.$error.required}">

                                            <ng-form name="RF_BRAND_ID_FORM">
                                                <select class="form-control" kendo-drop-down-list name="RF_BRAND_ID" k-option-label="'-- Select Brand --'" ng-disabled="item.KNT_PLAN_D_ID>0"
                                                        k-data-text-field="'BRAND_NAME_EN'" k-data-value-field="'RF_BRAND_ID'"
                                                        k-auto-bind="'true'" k-data-source="item.brandListDs" k-ng-delay="item.brandListDs" ng-model="item.RF_BRAND_ID"
                                                        k-on-change="vm.onChangeBrnad(item,kendoEvent,true,$index)" k-on-data-bound="vm.onBoundBrnad(item,true,$index)"></select>
                                            </ng-form>

                                        </td>


                                        <td ng-class="{'has-error': (KNT_YRN_LOT_ID_FORM.KNT_YRN_LOT_ID.$touched || KnitPlanParameter.$submitted ||!item.KNT_YRN_LOT_ID_V ) && KNT_YRN_LOT_ID_FORM.KNT_YRN_LOT_ID.$error.required}">

                                            <ng-form name="KNT_YRN_LOT_ID_FORM">
                                                <select class="form-control" kendo-drop-down-list name="KNT_YRN_LOT_ID" k-option-label="'-- Yarn Lot --'" ng-disabled="item.KNT_PLAN_D_ID>0"
                                                        k-data-text-field="'YRN_LOT_NO'" k-data-value-field="'KNT_YRN_LOT_ID'" k-filer="'contains'"
                                                        k-auto-bind="'true'" k-data-source="item.yarnLotListDs" k-ng-delay="item.yarnLotListDs" ng-model="item.KNT_YRN_LOT_ID"
                                                        k-on-change="vm.onChangeYarnLot(item,kendoEvent,true,$index)" k-on-data-bound="vm.onBoundYarnLot(item,true,$index)" required k-template="vm.template" k-value-template="vm.value_template"></select>
                                            </ng-form>

                                        </td>

                                        <td ng-if="(data.IS_FBP_VISIBLE=='Y'||data.RF_FAB_TYPE_ID==33)" ng-class="{'has-error': (LK_YFAB_PART_ID_FORM.RF_BRAND_ID.$touched || KnitPlanParameter.$submitted) && LK_YFAB_PART_ID_FORM.RF_BRAND_ID.$error.required}">

                                            <ng_form name="LK_YFAB_PART_ID_FORM">
                                                <select class="form-control" kendo-drop-down-list name="LK_YFAB_PART_ID" k-option-label="'-- Select Gauge--'"
                                                        k-data-text-field="'LK_DATA_NAME_EN'" k-data-value-field="'LOOKUP_DATA_ID'"
                                                        k-auto-bind="'true'" k-data-source="vm.PartListDs" ng-model="item.LK_YFAB_PART_ID"
                                                        k-on-change="vm.onChangeYarnPart(item,kendoEvent,true,$index)" k-ng-delay="vm.PartListDs" required></select>
                                            </ng_form>


                                        </td>
                                        <td ng-class="{'has-error': (STITCH_LEN_FORM.STITCH_LEN.$index.$touched || KnitPlanParameter.$submitted) && STITCH_LEN_FORM.STITCH_LEN.$error.required}">

                                            <ng-form name="STITCH_LEN_FORM">
                                                <input type="number" class="form-control" name="STITCH_LEN" ng-model="item.STITCH_LEN" ng-change="vm.onChangeSL(item)" required />
                                            </ng-form>



                                        </td>


                                        <td ng-if="(data.IS_FBP_VISIBLE=='Y'|| data.IS_ELA_MXD=='Y'||data.RF_FAB_TYPE_ID==33)" ng-class="{'has-error': (RATIO_QTY_FORM.RATIO_QTY.$touched || KnitPlanParameter.$submitted) && RATIO_QTY_FORM.RATIO_QTY.$error.required}">
                                            <ng-form name="RATIO_QTY_FORM">
                                                <input type="number" class="form-control" name="RATIO_QTY" min="0" ng-model="item.RATIO_QTY" required />
                                            </ng-form>

                                        </td>




                                        <td ng-class="{'has-error': (RQD_YRN_QTY_FORM.RQD_YRN_QTY.$touched || KnitPlanParameter.$submitted) && (RQD_YRN_QTY_FORM.RQD_YRN_QTY.$error.required||RQD_YRN_QTY_FORM.RQD_YRN_QTY.$error.min||RQD_YRN_QTY_FORM.RQD_YRN_QTY.$error.max)}">
                                            <ng-form name="RQD_YRN_QTY_FORM">
                                                <input type="number" ng-init="(data.IS_FBP_VISIBLE=='N' && item.KNT_PLAN_D_ID<0)?item.RQD_YRN_QTY=(data.RQD_GFAB_QTY-data.GFAB_ADJ_QTY):item.RQD_YRN_QTY=item.RQD_YRN_QTY" class="form-control" name="RQD_YRN_QTY" min="{{item.ALOC_QTY}}" max="{{data.RQD_GFAB_QTY-data.GFAB_ADJ_QTY}}" ng-model="item.RQD_YRN_QTY" required />
                                            </ng-form>

                                        </td>

                                        <td ng-if="(data.RF_FAB_PROD_CAT_ID==1||data.RF_FAB_PROD_CAT_ID==3)">
                                            <input type="checkbox" name="IS_USE_WIP" ng-model="item.IS_USE_WIP" ng-true-value="'Y'" ng-false-value="'N'" /> WIP
                                        </td>


                                        <td>
                                            <input type="text" class="form-control" name="YRN_NOTE" ng-model="item.YRN_NOTE" />
                                        </td>


                                        <td>
                                            <a class="btn btn-xs red" ng-if="$index>0" ng-click="vm.removeItem(data.items,$index)">
                                                <i class="fa fa-times"></i>
                                            </a>
                                            <a class="btn btn-xs blue-madison" ng-if="$index==(data.items.length-1)" ng-click="vm.addToList(item,data.items);">
                                                <i class="fa fa-plus"></i>
                                            </a>
                                        </td>
                                    </tr>


                                </tbody>
                            </table>




                        </fieldset>

                        <fieldset class="custom-fieldset" style="padding-top: 0px;padding-bottom: 0px;">
                            <legend class="custom-legend"> Feeder Arrangement</legend>
                            <div class="row">
                                <div class="col-md-8">
                                    <table class="table table-condensed table-striped table-bordered" style="padding:5px;">
                                        <thead>
                                            <tr class="site-table-header">
                                                <th style="width:4%;">
                                                    <small>
                                                        SL#
                                                    </small>
                                                </th>
                                                <th style="width:20%;">
                                                    <small>
                                                        Color
                                                    </small>

                                                </th>

                                                <th style="width:8%;">
                                                    <small>
                                                        No of Feeder
                                                    </small>
                                                </th>
                                                <th style="width:8%;">
                                                    <small>
                                                        (%)
                                                    </small>
                                                </th>


                                                <th style="width:15%;">
                                                    <small>
                                                        Remarks
                                                    </small>

                                                </th>
                                                <th style="width:5%;">
                                                    <small>Action</small>
                                                </th>
                                            </tr>
                                        </thead>

                                        <tbody>


                                            <tr ng-repeat="item in data.kp_feeders">

                                                <td>
                                                    <input type="number" class="form-control" name="SL" ng-model="item.SL" />
                                                </td>

                                                <td ng-class="{'has-error': (SOLID_COLOR_ID_FORM.SOLID_COLOR_ID.$touched || KnitPlanParameter.$submitted||!item.SOLID_COLOR_ID_V) && SOLID_COLOR_ID_FORM.SOLID_COLOR_ID.$error.required}">

                                                    <ng-form name="SOLID_COLOR_ID_FORM">
                                                        <select class="form-control" kendo-drop-down-list name="SOLID_COLOR_ID" k-option-label="'-- Select Yarn Item --'"
                                                                k-data-text-field="'COLOR_NAME_EN'" k-data-value-field="'SOLID_COLOR_ID'" k-filter="'contains'"
                                                                k-auto-bind="'true'" k-data-source="data.yd_colors" ng-model="item.SOLID_COLOR_ID" required></select>
                                                    </ng-form>

                                                </td>


                                                <td ng-class="{'has-error': (NO_OF_FDR_FORM.NO_OF_FDR.$touched || KnitPlanParameter.$submitted) && (NO_OF_FDR_FORM.NO_OF_FDR.$error.required || NO_OF_FDR_FORM.NO_OF_FDR.$error.min)}">
                                                    <ng-form name="NO_OF_FDR_FORM">
                                                        <input type="number" class="form-control" name="NO_OF_FDR" min="1" ng-model="item.NO_OF_FDR" required />
                                                    </ng-form>
                                                </td>

                                                <td ng-class="{'has-error': (PCT_VALUE_FORM.PCT_VALUE.$touched||KnitPlanParameter.$submitted) && PCT_VALUE_FORM.PCT_VALUE.$error.required}">
                                                    <ng-form name="PCT_VALUE_FORM">
                                                        <input type="number" required min="0.01" class="form-control" name="PCT_VALUE" ng-model="item.PCT_VALUE" />
                                                    </ng-form>
                                                </td>

                                                <td>
                                                    <input type="text" class="form-control" name="REMARKS" ng-model="item.REMARKS" />
                                                </td>


                                                <td>
                                                    <a class="btn btn-xs red" ng-if="$index>0" ng-click="vm.removeItem(data.kp_feeders,$index)">
                                                        <i class="fa fa-times"></i>
                                                    </a>
                                                    <a class="btn btn-xs blue-madison" ng-if="$index==(data.kp_feeders.length-1)" ng-click="vm.addToListKpFeed(item,data.kp_feeders);">
                                                        <i class="fa fa-plus"></i>
                                                    </a>
                                                </td>
                                            </tr>

                                            <tr>

                                                <td colspan="2" style="text-align:right;">
                                                    <b>Ttl Feeder</b>
                                                </td>
                                                <td>
                                                    <b>{{ttl_feeder}}</b>
                                                </td>

                                                <td></td>


                                                <td></td>
                                            </tr>


                                        </tbody>
                                    </table>
                                </div>
                                <div class="col-md-4">
                                    <table class="table table-condensed table-striped table-bordered" style="padding:5px;">
                                        <thead>
                                            <tr class="site-table-header">
                                                <th style="width:40%;">
                                                    <small>
                                                        SL# LIST
                                                    </small>
                                                </th>
                                                <th style="width:30%;">
                                                    <small>
                                                        No Of Repeat
                                                    </small>

                                                </th>

                                                <th style="width:10%;">
                                                    <small>Action</small>
                                                </th>
                                            </tr>
                                        </thead>

                                        <tbody>


                                            <tr ng-repeat="item in data.yd_repeats">

                                                <td ng-class="{'has-error': (SL_LIST_FORM.SL_LIST.$touched || KnitPlanParameter.$submitted) && SL_LIST_FORM.SL_LIST.$error.required}">
                                                    <ng-form name="SL_LIST_FORM">
                                                        <input type="text" class="form-control" name="SL_LIST" placeholder="example 1,2" ng-model="item.SL_LIST" />
                                                    </ng-form>

                                                </td>


                                                <td ng-class="{'has-error': (NO_OF_REPEAT_FORM.NO_OF_REPEAT.$touched || KnitPlanParameter.$submitted) && NO_OF_REPEAT_FORM.NO_OF_REPEAT.$error.required}">
                                                    <ng-form name="NO_OF_REPEAT_FORM">
                                                        <input type="number" class="form-control" name="NO_OF_REPEAT" min="0" ng-model="item.NO_OF_REPEAT" required />
                                                    </ng-form>

                                                </td>

                                                <td>
                                                    <a class="btn btn-xs red" ng-if="$index>0" ng-click="vm.removeItem(data.yd_repeats,$index)">
                                                        <i class="fa fa-times"></i>
                                                    </a>
                                                    <a class="btn btn-xs blue-madison" ng-if="$index==(data.yd_repeats.length-1)" ng-click="data.yd_repeats.push({KNT_YD_FDR_REPEAT_ID:-1,KNT_PLAN_H_ID:-1})">
                                                        <i class="fa fa-plus"></i>
                                                    </a>
                                                </td>
                                            </tr>


                                        </tbody>
                                    </table>
                                </div>
                            </div>


                        </fieldset>


                        <div class="row" style="padding-left:3px;padding-top:2px;" ng-if="data.IS_FINALIZED=='Y'">
                            <div class="col-md-12" style="text-align:right;">
                                <div class="dropdown btn-group">
                                    <button type="button" class="btn btn-xs green" ng-if="data.KNT_PLAN_H_ID > 0" ng-click="vm.submitData(data,KnitPlanParameter.$valid,'Y');KnitPlanParameter.$submitted= true;">Revise</button>
                                </div>

                            </div>
                        </div>


                        <div class="row" style="padding-left:3px;padding-top:4px;">
                            <div class="col-md-10">
                                <button type="button" class="btn btn-sm yellow-gold" ng-if="data.KNT_PLAN_H_ID > 0 " ng-click="vm.submitData(data,KnitPlanParameter.$valid,'N');KnitPlanParameter.$submitted= true;">Update</button>
                                <button type="button" class="btn btn-sm green" ng-if="data.KNT_PLAN_H_ID <= 0" ng-click="vm.submitData(data,KnitPlanParameter.$valid,'N');KnitPlanParameter.$submitted= true;">Save</button>
                                <button type="button" class="btn btn-sm default" ng-click="cancel()">Cancel</button>
                            </div>

                            <div class="col-md-2" style="float:right;">
                                <a class="btn btn-sm purple" ng-click="vm.openProgramModal({KNT_PLAN_H_ID:data.KNT_PLAN_H_ID})"> <i class="fa fa-plus"></i> Knit Card </a>
                            </div>

                        </div>

                    </div>
                    <div class="row" style="margin:auto;padding-top:10px;" ng-if="vm.errors">
                        <div class="col-md-5 col-md-offset-2">
                            <div class="alert alert-warning" role="alert">
                                <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>
                                <ul ng-repeat="field in vm.errors">
                                    <li ng-repeat="error in field" ng-bind="error"></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                </div>
            </form>
        </div>
    </div>
</div>