<ul class="page-breadcrumb breadcrumb">
    <li>
        <a href="index.html">MultiTex ERP</a>

    </li>
    <li>
        <a href="#">Merchandising</a>

    </li>
    <li>
        <a href="#" ng-bind="vm.Title"></a>
    </li>
</ul>

<div class="portlet box blue-dark">
    <div class="portlet-title">
        <div class="caption">
            {{vm.Title+' '+vm.TitleAdi}}
        </div>
        <div class="tools">
        </div>
    </div>

    <div class="portlet-body">
        <fieldset class="custom-fieldset" style="padding-top: 0px;padding-bottom: 0px;" ng-disabled="vm.ScProData.IS_REQS_DONE=='Y'">
            <legend class="custom-legend">Knit Card Info</legend>

            <div class="row" style="text-align:right;padding-bottom:3px;">
                <div class="col-md-12">
                    <a class="btn btn-xs purple" ng-click="vm.openExColourListModal(data)"><i class="fa fa-plus"></i> Other Order</a>

                </div>

            </div>

            <table class="table table-condensed table-striped table-bordered" style="padding:5px;">
                <thead>
                    <tr class="site-table-header">
                        <td class="text-justify">
                            <b>Buyer A/C : </b> {{data.BYR_ACC_NAME_EN}} <b> &nbsp;  Style # : </b> {{data.WORK_STYLE_NO}} &nbsp; <b>Order #: </b> {{data.ORDER_NO_LIST}}&nbsp;
                            <b>Fabrication :</b>  {{data.FABRIC_SNAME}}&nbsp;&nbsp; <b>Color:</b>  {{data.COLOR_NAME_EN}}&nbsp;&nbsp;<b>Fin Dia :</b>  {{data.FIN_DIA_N_DIA_TYPE}}
                            &nbsp;&nbsp;<b>Fin GSM :</b>  {{data.FIN_GSM}}

                            &nbsp;<b>Req Qty :</b>   {{data.RQD_GFAB_QTY +' '+data.MOU_CODE}}

                        </td>
                    </tr>
                    <tr>
                        <td style="padding-left:90%; color:red;">
                            <b>Qty Left :</b>   {{data.QTY_LEFT +' '+data.MOU_CODE}}

                        </td>
                    </tr>

                    <tr>
                        <td>

                            <form role="form" name="JobCardParams" class="form-horizontal">
                                <div class="form-group">
                                    <label class="col-md-1 control-label">
                                        Job Card No
                                    </label>
                                    <div class="col-md-1" style="padding-left:0px;padding-right:0px;">
                                        <input type="text" class="form-control" ng-model="data.JOB_CRD_NO" disabled />
                                    </div>
                                    <label class="col-md-1 control-label" style="padding-left:0px;padding-right:0px;">
                                        Exp. M/C Dia
                                    </label>
                                    <div class="col-md-1">

                                        <select class="form-control" kendo-drop-down-list name="KNT_MC_DIA_ID" k-option-label="'--M/C Dia--'" k-filter="'Contains'"
                                                k-data-text-field="'MC_DIA'" k-data-value-field="'KNT_MC_DIA_ID'"
                                                k-auto-bind="'true'" k-data-source="vm.machineDiaDs" k-ng-delay="vm.machineDiaDs" ng-model="data.KNT_MC_DIA_ID" required disabled></select>

                                    </div>

                                    <label class="col-md-1 control-label">
                                        Act M/C Dia
                                    </label>
                                    <div class="col-md-1" ng-class="{'has-error': (JobCardParams.ACT_MC_DIA_ID.$touched || JobCardParams.$submitted) && JobCardParams.ACT_MC_DIA_ID.$error.required}">
                                        <select class="form-control" kendo-drop-down-list name="ACT_MC_DIA_ID" k-option-label="'--N/A--'" k-filter="'Contains'"
                                                k-data-text-field="'MC_DIA'" k-data-value-field="'KNT_MC_DIA_ID'"
                                                k-auto-bind="'true'" k-data-source="vm.machineDiaDs"
                                                k-ng-delay="vm.machineDiaDs" k-on-change="vm.onChangeMcDia(kendoEvent)" ng-model="data.ACT_MC_DIA_ID" ng-required="!(data.RF_FAB_PROD_CAT_ID==1||data.RF_FAB_PROD_CAT_ID==3)"></select>                                        
                                    </div>

                                    <label class="col-md-1 control-label">
                                        Exp. Fin Dia
                                    </label>
                                    <div class="col-md-1">
                                        <span class="col-md-6" style="padding-left:0px;padding-right:0px;">
                                            <input type="text" name="FIN_DIA" class="form-control" ng-model="data.FIN_DIA" readonly />
                                        </span>
                                        <span class="col-md-6" style="padding-left:3px;padding-right:0px;">
                                            <input type="text" name="DIA_TYPE" class="form-control" ng-model="data.DIA_TYPE" readonly />
                                        </span>

                                    </div>
                                    <label class="col-md-1 control-label">
                                        Finish Dia
                                    </label>
                                    <div class="col-md-1" ng-class="{'has-error': (JobCardParams.ACT_FIN_DIA.$touched || JobCardParams.$submitted) && ( JobCardParams.ACT_FIN_DIA.$error.required||JobCardParams.ACT_FIN_DIA.$error.min)}">
                                        <input type="number" name="ACT_FIN_DIA" min="{{(data.RF_FAB_PROD_CAT_ID==1||data.RF_FAB_PROD_CAT_ID==3)?0:1}}" class="form-control" ng-model="data.ACT_FIN_DIA" required />
                                    </div>

                                    <label class="col-md-1 control-label">
                                        M/C Gauge
                                    </label>
                                    <div class="col-md-1">
                                        <select class="form-control" kendo-drop-down-list name="LK_MC_GG_ID"
                                                k-data-text-field="'LK_DATA_NAME_EN'" k-data-value-field="'LOOKUP_DATA_ID'"
                                                k-auto-bind="'true'" k-data-source="vm.MachineGaugeListDs" k-ng-delay="vm.MachineGaugeListDs" ng-model="data.LK_MC_GG_ID" ng-disabled="true"></select>
                                    </div>

                                </div>

                                <div class="form-group">

                                    <label class="col-md-1 control-label">
                                        Prod. Flr
                                    </label>
                                    <div class="col-md-1" ng-class="{'has-error': (JobCardParams.HR_PROD_FLR_ID.$touched || JobCardParams.$submitted) && JobCardParams.HR_PROD_FLR_ID.$error.required}" style="padding-left:0px;padding-right:0px;">
                                        <select class="form-control" kendo-drop-down-list name="HR_PROD_FLR_ID" k-option-label="'-- Select Flr--'"
                                                k-data-text-field="'FLOOR_DESC_EN'" k-data-value-field="'HR_PROD_FLR_ID'"
                                                k-auto-bind="'true'" k-data-source="vm.KnitMachineFlrListDs" ng-if="vm.params.pIS_SUB_CONTR != 'Y'" k-ng-delay="vm.KnitMachineFlrListDs" ng-model="data.HR_PROD_FLR_ID" required k-on-change="vm.onFlrChange(kendoEvent)"></select>
                                    </div>


                                    <label class="col-md-1 control-label">
                                        M/C
                                    </label>
                                    <div class="col-md-1" @*style="padding-left:0px;padding-right:0px;"*@>
                                        <select class="form-control" kendo-drop-down-list name="KNT_MACHINE_ID" k-option-label="'-- N/A--'"
                                                k-data-text-field="'KNT_MACHINE_NO'" k-data-value-field="'KNT_MACHINE_ID'"
                                                k-auto-bind="'true'" k-data-source="vm.KnitMachineListDs" ng-if="vm.params.pIS_SUB_CONTR != 'Y'" k-ng-delay="vm.KnitMachineListDs" ng-model="data.KNT_MACHINE_ID" k-on-change="vm.onMachineChange(kendoEvent)"></select>
                                    </div>


                                    <label class="col-md-1 control-label">
                                        Assign Qty
                                    </label>
                                    <div class="col-md-1" ng-class="{'has-error': (JobCardParams.ASIGN_QTY.$touched || JobCardParams.$submitted) && (JobCardParams.ASIGN_QTY.$error.required||JobCardParams.ASIGN_QTY.$error.max)}">
                                        <input type="number" name="ASIGN_QTY" @*max="{{data.QTY_LEFT+(data.KNT_JOB_CRD_H_ID>0?data.ASIGN_QTY:0)}}"*@ class="form-control" ng-model="data.ASIGN_QTY" ng-model-options="{ debounce: { 'default': 500, 'blur': 0 } }" required ng-disabled="data.IS_FINALIZED=='Y'" />
                                    </div>

                                    <label class="col-md-1 control-label">
                                        Trgt/Day
                                    </label>
                                    <div class="col-md-1" ng-class="{'has-error': (JobCardParams.TG_D_PROD_QTY.$touched || JobCardParams.$submitted) && JobCardParams.TG_D_PROD_QTY.$error.required}">
                                        <input type="number" name="TG_D_PROD_QTY" class="form-control" min="1" ng-if="vm.params.pIS_SUB_CONTR != 'Y'" ng-model="data.TG_D_PROD_QTY" required ng-disabled="data.IS_FINALIZED=='Y'" />
                                    </div>
                                    

                                    <div class="col-md-1" ng-if="vm.params.pIS_SUB_CONTR && vm.params.pIS_SUB_CONTR =='Y'" style="padding-left:0px;padding-right:0px;">
                                        <div class="checkbox-list">
                                            <label class="checkbox-inline" style="margin-left:20px;margin-top:-10px;">
                                                <span><input type="checkbox" ng-value="data.IS_SUB_CONTR='Y'" ng-model="data.IS_SUB_CONTR" ng-true-value="'Y'" ng-false-value="'N'" readonly></span>SubContract?
                                            </label>
                                        </div>
                                    </div>

                                    <label class="col-md-1 control-label" ng-if="vm.params.pIS_SUB_CONTR && vm.params.pIS_SUB_CONTR =='Y'">
                                        Rate/Kg
                                    </label>
                                    <div class="col-md-1" ng-class="{'has-error': (JobCardParams.PROD_RATE.$touched || JobCardParams.$submitted) && JobCardParams.PROD_RATE.$error.required}" ng-if="vm.params.pIS_SUB_CONTR && vm.params.pIS_SUB_CONTR =='Y'">
                                        <input type="number" name="PROD_RATE" class="form-control" min="0.001"  ng-model="data.PROD_RATE" required ng-disabled="data.IS_FINALIZED=='Y'" />
                                    </div>


                                </div>

                                <div class="form-group">
                                    <label class="col-md-1 control-label">
                                        Schedule
                                    </label>
                                    <div class="col-md-3" style="padding-left:0px;padding-right:0px;">
                                        <span class="col-md-6" style="padding-left:0px; padding-right:2px;">
                                            <input type="text" class="form-control" ng-click="vm.START_DT_OPEN($event)" datepicker-popup="{{vm.dtFormat}}"
                                                   name="START_DT" ng-model="data.START_DT" ng-change="data.END_DT=data.START_DT" is-open="vm.START_DT_OPENED"
                                                   datepicker-options="dateOptions" date-disabled="disabled(date, mode)" required close-text="Close" />
                                        </span>
                                        <span class="col-md-6" style="padding-left:2px;padding-right:0px;">
                                            <input type="text" class="form-control" ng-click="vm.END_DT_OPEN($event)" datepicker-popup="{{vm.dtFormat}}" min-date="data.START_DT"
                                                   name="END_DT" ng-model="data.END_DT" is-open="vm.END_DT_OPENED" datepicker-options="dateOptions"
                                                   date-disabled="disabled(date, mode)" required close-text="Close" />
                                        </span>
                                    </div>

                                    <label class="col-md-1" style="padding-left:0px;padding-right:0px;">
                                    </label>
                                    <div class="col-md-1" style="padding-left:0px;padding-right:0px;">
                                        <div class="checkbox-list">
                                            <label class="checkbox-inline" style="margin-left:20px;margin-top:-10px;">
                                                <span><input type="checkbox" ng-init="data.IS_FINALIZED_SC='Y'" ng-model="data.IS_FINALIZED_SC" ng-true-value="'Y'" ng-false-value="'N'"></span> Finalised?
                                            </label>
                                        </div>
                                    </div>

                                    <div class="col-md-3" style="padding-left:0px;padding-right:0px;">
                                        <div class="checkbox-list">
                                            <label class="checkbox-inline" style="margin-left:20px;margin-top:-10px;">
                                                <span><input type="checkbox" ng-model="data.IS_REMARKS" ng-true-value="'Y'" ng-false-value="'N'" ng-disabled="data.IS_FINALIZED=='Y'"></span> Remarks
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    @*<pre>{{JobCardParams.FAB_ITEM_DESC|json}}</pre>*@

                                    <label class="col-md-1 control-label">
                                        Fab.Descr
                                    </label>
                                    <div class="col-md-10" style="padding-left:0px;padding-right:0px;" ng-class="{'has-error': (JobCardParams.FAB_ITEM_DESC.$touched || JobCardParams.$submitted) && JobCardParams.FAB_ITEM_DESC.$error.required}">
                                        <input type="text" class="form-control" name="FAB_ITEM_DESC" ng-model="data.FAB_ITEM_DESC" ng-disabled="data.IS_FINALIZED=='Y'" required />
                                    </div>
                                    
                                </div>

                                <div class="form-group" >
                                    <label class="col-md-1 control-label" >
                                        Note
                                    </label>
                                    <div class="col-md-10" style="padding-left:0px;padding-right:0px;">
                                        <textarea rows="2" ng-disabled="data.IS_FINALIZED=='Y'" name="ADDL_NOTE" class="form-control" cols="50" ng-model="data.ADDL_NOTE"></textarea>
                                    </div>
                                </div>

                                <div class="form-group" ng-show="data.IS_REMARKS=='Y'">
                                    <label class="col-md-1 control-label" >
                                        Remarks
                                    </label>
                                    <div class="col-md-10" style="padding-left:0px;padding-right:0px;">
                                        <textarea rows="5" ng-disabled="data.IS_FINALIZED=='Y'" name="PLAN_NOTE" class="form-control" cols="50" ng-model="data.REMARKS"></textarea>
                                    </div>
                                </div>
                            </form>

                        </td>
                    </tr>
                </thead>
            </table>


            <form name="YarnDetailsJobCard">
                <fieldset class="custom-fieldset" style="padding-top: 0px;padding-bottom: 5px;" ng-disabled="data.IS_FINALIZED=='Y'">
                    <legend class="custom-legend"> Yarn Details</legend>

                    <table class="table table-condensed table-striped table-bordered" style="padding:5px;">
                        <thead>
                            <tr class="site-table-header">
                                <th style="width:20%;">
                                    <small>
                                        Yarn
                                    </small>

                                </th>
                                <th style="width:10%;">
                                    <small>
                                        Yarn Lot
                                    </small>

                                </th>


                                <th style="width:10%;" ng-if="data.IS_FBP_VISIBLE=='Y'">
                                    <small>
                                        Part
                                    </small>

                                </th>
                                <th style="width:5%;" @*ng-if="data.IS_FBP_VISIBLE=='Y'"*@>
                                    <small>
                                        Ratio(%)
                                    </small>

                                </th>

                                <th style="width:5%;" ng-if="data.IS_FDR_OPT=='Y'">
                                    <small>
                                        NoOfFeeder
                                    </small>

                                </th>


                                <th style="width:10%;">
                                    <small>
                                        Stitch Len
                                    </small>

                                </th>


                                <th style="width:10%;">
                                    <small>
                                        Req Yarn
                                    </small>

                                </th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr ng-repeat="item in data.details track by $index">

                                <td>
                                    {{item.ITEM_NAME_EN}}
                                </td>

                                <td ng-class="{'has-error': ((YarnDetailsJobCard['KNT_YRN_LOT_ID'+$index].$touched || YarnDetailsJobCard.$submitted) && YarnDetailsJobCard['KNT_YRN_LOT_ID'+$index].$error.required)||item.INVALID_LOT}">
                                    <select class="form-control" kendo-drop-down-list name="KNT_YRN_LOT_ID{{$index}}" k-option-label="'--Yarn Lot --'"
                                            k-data-text-field="'YRN_LOT_NO'" k-data-value-field="'KNT_YRN_LOT_ID'"
                                            k-auto-bind="'true'" k-data-source="item.yarnLotListDs" k-ng-delay="item.yarnLotListDs" ng-model="item.KNT_YRN_LOT_ID"
                                            ng-required="true" k-template="vm.template" k-on-data-bound="vm.yarnLotListOnBound(item,kendoEvent)" k-value-template="vm.value_template" k-on-change="vm.onChangeYarnLot(item,kendoEvent)" ng-disabled="data.IS_FINALIZED=='Y'"></select>
                                </td>

                                <td ng-if="data.IS_FBP_VISIBLE=='Y'">
                                    {{item.LK_YFAB_PART_NAME}}
                                </td>

                                <td @*ng-if="data.IS_FBP_VISIBLE=='Y'"*@>
                                    {{item.RATIO_QTY}}
                                   
                                </td>

                                <td ng-if="data.IS_FDR_OPT=='Y'">
                                    {{item.NO_OF_FDR}}
                                </td>

                                <td>
                                    <input type="number" class="form-control" ng-model="item.STITCH_LEN" name="STITCH_LEN" ng-disabled="data.IS_FINALIZED=='Y'" />
                                </td>
                                <td>
                                    <input type="text" class="form-control" ng-model="item.RQD_YRN_QTY" name="RQD_YRN_QTY" ng-disabled="data.IS_FINALIZED=='Y'" />
                                  
                                </td>

                            </tr>
                        </tbody>
                    </table>
                </fieldset>
            </form>
            <div class="row" style="padding-top:4px;padding-bottom:4px;" ng-if="data.IS_FINALIZED=='N'">
                <div class="col-md-12" style="text-align:right;">
                    <button type="button" class="btn btn-xs yellow-gold" ng-if="data.KNT_JOB_CRD_H_ID > 0 " ng-click="vm.submitData(data,JobCardParams.$valid,YarnDetailsJobCard.$valid);JobCardParams.$submitted= true;YarnDetailsJobCard.$submitted = true;" ng-disabled="JobCardParams.$invalid || YarnDetailsJobCard.$invalid">Update</button>
                    <button type="button" class="btn btn-xs green" ng-if="data.KNT_JOB_CRD_H_ID <= 0" ng-click="vm.submitData(data,JobCardParams.$valid,YarnDetailsJobCard.$valid);JobCardParams.$submitted= true;YarnDetailsJobCard.$submitted = true;" ng-disabled="JobCardParams.$invalid || YarnDetailsJobCard.$invalid"> <i class="fa fa-plus"></i> Add Knit Card</button>
                    <a class="btn btn-xs blue" ui-sref="KnitPlanJobCard({pKNT_PLAN_H_ID:data.KNT_PLAN_H_ID,pKNT_JOB_CRD_H_ID :0})" ui-sref-opts="{inherit:true}" ng-if="data.KNT_JOB_CRD_H_ID >0">  <i class="fa fa-plus"></i>New Knit Card</a>

                    <button type="button" class="btn btn-xs default" ng-click="vm.reset()">Cancel</button>
                </div>
            </div>

            <div class="row" style="padding-top:4px;padding-bottom:4px;" ng-if="data.IS_FINALIZED=='Y'">
                <div class="col-md-12" style="text-align:right;">
                    <a class="btn btn-xs blue" ui-sref="KnitPlanJobCard({pKNT_PLAN_H_ID:data.KNT_PLAN_H_ID,pKNT_JOB_CRD_H_ID :0})" ui-sref-opts="{inherit:true}">  <i class="fa fa-plus"></i>New Knit Card</a>
                </div>
            </div>

        </fieldset>


        <fieldset class="custom-fieldset" style="padding-top: 0px;padding-bottom: 5px;">
            <legend class="custom-legend"> Knit Card List</legend>

            <table class="table table-condensed table-striped table-bordered" style="padding:5px;">
                <thead>
                    <tr class="site-table-header">
                        <th style="width:8%;">
                            <small>
                                Knit Card#
                            </small>

                        </th>
                        <th style="width:10%;">
                            <small>
                                Buyer
                            </small>

                        </th>

                        <th style="width:10%;">
                            <small>
                                Style/Order
                            </small>

                        </th>

                        <th style="width:7%;">
                            <small>
                                Fab. Type
                            </small>

                        </th>
                        <th style="width:7%;">
                            <small>
                                Colour
                            </small>

                        </th>


                        <th style="width:7%;">
                            <small>
                                M/C
                            </small>

                        </th>

                        <th style="width:5%;">
                            <small>
                                M/C Dia
                            </small>

                        </th>



                        <th style="width:6%;">
                            <small>
                                Fin Dia
                            </small>

                        </th>

                        <th style="width:15%;">
                            <small>
                                Yarn Details
                            </small>

                        </th>

                        <th style="width:6%;">
                            <small>
                                Gauge
                            </small>

                        </th>

                        <th style="width:5%;">
                            <small>
                                Ass Qty
                            </small>
                        </th>

                        <th style="width:5%;">
                            <small>
                                Status
                            </small>
                        </th>
                        @*<th style="width:15%;">
                            <small>
                                Remarks
                            </small>
                        </th>*@
                        <th style="width:7%;">
                            <small>
                                Action
                            </small>
                        </th>

                    </tr>
                </thead>

                <tbody>
                    <tr ng-repeat="item in vm.jobCardList">
                        <td>
                            {{item.JOB_CRD_NO}}
                        </td>


                        <td>
                            {{item.BYR_ACC_NAME_EN}}
                        </td>


                        <td>
                            {{item.WORK_STYLE_NO}}<br />
                            {{item.ORDER_NO_LIST}}
                        </td>


                        <td>
                            {{item.FAB_TYPE_NAME}}
                        </td>

                        <td>
                            {{item.COLOR_NAME_EN}}
                        </td>

                        <td>
                            {{item.KNT_MACHINE_NO}}
                        </td>

                        <td>
                            {{item.ACT_MC_DIA}}
                        </td>

                        <td>
                            {{item.ACT_FIN_DIA_N_DIA_TYPE}}
                        </td>
                        

                        @*<td>
                            {{item.FIN_DIA_N_DIA_TYPE}}
                        </td>*@


                        <td>
                            {{item.YRN_DETAILS}}
                        </td>

                        <td>
                            {{item.MC_GAUGE_NO}}
                        </td>

                        <td>
                            {{item.ASIGN_QTY}} {{item.MOU_CODE}}
                        </td>

                        <td>
                            <span class="label" ng-style="{'background-color' : item.RGB_COL_CODE}">
                                {{item.JC_STS_TYP_NAME}} @*{{item.REQ_YRN_QTY_DONE}}*@
                            </span>
                        </td>

                        @*<td>
                            {{item.REMARKS}}
                        </td>*@
                        <td ng-if="data.IS_KNT_CLOSED=='N'">
                            <a class="btn btn-xs blue-madison" ng-disabled="vm.ScProData.IS_REQS_DONE=='Y'" ng-click="vm.onEditClick(item)">
                                <i class="fa fa-pencil"></i>
                            </a>

                            <a class="btn btn-xs blue" ng-click="vm.printKnitCard(item)">
                                <i class="fa fa-print"></i>
                            </a>

                            <a class="btn btn-xs red" @*ng-disabled="item.KNT_JC_STS_TYPE_ID==6"*@ ng-click="vm.unAssignQty(item)">
                                <i class="fa fa-ban"></i>
                            </a>


                        </td>

                        <td ng-if="data.IS_KNT_CLOSED=='Y'">
                            <a class="btn btn-xs blue" ng-click="vm.printKnitCard(item)">
                                <i class="fa fa-print"></i>
                            </a>
                            <span class="badge badge-danger">[Closed]</span>
                        </td>

                    </tr>
                </tbody>
            </table>
        </fieldset>

        <div class="row" style="padding-top:4px;padding-bottom:5px;">
            <div class="col-md-12">
                <a class="btn btn-xs blue" href="/Knitting/Knit/KnitPlan/#/KnitPlan?pMC_FAB_PROD_ORD_D_ID={{data.MC_FAB_PROD_ORD_D_ID}}&pRF_FAB_PROD_CAT_ID={{vm.params.pRF_FAB_PROD_CAT_ID}}&state={{vm.params.state}}&pCT_ID_LST={{vm.params.pCT_ID_LST}}">  <i class="fa fa-mail-reply"></i> Knit Plan</a>
                @*<a class="btn btn-xs blue" ng-if="vm.params.state || !vm.params.pIS_SUB_CONTR" href="/Knitting/Knit/JobCardDashboard/#/{{vm.params.state}}?pMC_FAB_PROD_ORD_H_ID={{vm.params.pMC_FAB_PROD_ORD_H_ID}}&pRF_FAB_PROD_CAT_ID={{vm.params.pRF_FAB_PROD_CAT_ID}}">  <i class="fa fa-mail-reply"></i> Inhouse Knit Card Dashboard</a>*@
                
                <a class="btn btn-xs blue" href="/Knitting/Knit/ScProgramList?a=129/#/ScProgramListSolid?pPRG_ISS_NO={{vm.ScProData.PRG_ISS_NO}}" ng-if="(vm.params.pIS_SUB_CONTR && vm.params.pIS_SUB_CONTR =='Y' && vm.params.pSC_PROG_STATE=='ScProgramListSolid')">  <i class="fa fa-mail-reply"></i> Sub-Contract Program List</a>
                <a class="btn btn-xs blue" href="/Knitting/Knit/ScProgramList?a=346/#/ScProgramListSolid4Smpl?pPRG_ISS_NO={{vm.ScProData.PRG_ISS_NO}}" ng-if="(vm.params.pIS_SUB_CONTR && vm.params.pIS_SUB_CONTR =='Y' && vm.params.pSC_PROG_STATE=='ScProgramListSolid4Smpl')">  <i class="fa fa-mail-reply"></i> Sub-Contract Program List</a>

                <a class="btn btn-xs blue" ng-click="vm.createStoreRequisition(vm.ScProData)" ng-disabled="(!vm.ENABLED_REQS) || (vm.ScProData.IS_REQS_DONE=='Y')" ng-if="vm.params.pIS_SUB_CONTR && vm.params.pIS_SUB_CONTR =='Y'" style="float:right;"> Make Requisition</a>
            </div>

        </div>
        <div class="row" style="margin:auto;padding-top:10px;" ng-if="vm.errors">
            <div class="col-md-5 col-md-offset-2">
                <div class="alert alert-warning" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>
                    <ul ng-repeat="field in vm.errors">
                        <li ng-repeat="error in field" ng-bind="error"></li>
                    </ul>
                </div>
            </div>
        </div>

    </div>
</div>

<script type="text/ng-template" id="ExColourListModal.html">
    <div class="modal-body">
        <div class="portlet grey-cascade box">
            <div class="portlet-title">
                <div>
                    <h3 style="padding-top:10px;margin-top:3px;">
                        Please select Knit Plan
                        <span class="pull-right"><i class="fa fa-times red" ng-click="cancel()"></i></span>
                    </h3>
                </div>
            </div>
            <div class="portlet-body">
                <fieldset class="custom-fieldset">
                    <legend class="custom-legend"><b>Search</b></legend>
                    <div>
                        <div>
                            <table class="clsTable">
                                <tbody class="clsthead">
                                    <tr class="clstd">
                                        <td class="clstd">
                                            Type
                                        </td>
                                        <td class="clstd">
                                            Buyer A/C
                                        </td>

                                        <td class="clstd">
                                            Shipment
                                        </td>
                                        <td class="clstd">
                                            Work Style
                                        </td>
                                        <td class="clstd">
                                            Order #
                                        </td>

                                        <td class="clstd">
                                            Action
                                        </td>
                                    </tr>
                                    <tr class="clstd">
                                        <td class="clstd">
                                            <select kendo-drop-down-list name="RF_FAB_PROD_CAT_ID" id="RF_FAB_PROD_CAT_ID" class="form-control"
                                                    options="productionTypeList" ng-model="search.RF_FAB_PROD_CAT_ID"></select>

                                        </td>
                                        <td class="clstd">
                                            <select kendo-drop-down-list name="MC_BYR_ACC_ID" class="form-control"
                                                    k-options="buyerAcList" id="MC_BYR_ACC_ID" ng-model="search.MC_BYR_ACC_ID" required></select>

                                        </td>

                                        <td class="clstd">
                                            <select class="form-control" kendo-drop-down-list name="MONTHOF" k-option-label="'-- Select Month --'"
                                                    k-data-text-field="'MONTHOF'" k-data-value-field="'MONTHOF'" k-filter="'contains'"
                                                    k-auto-bind="'true'" k-data-source="shipMonthList" k-ng-delay="shipMonthList" ng-model="search.MONTHOF"
                                                    k-on-change="onChangeShipMonth(kendoEvent)"></select>
                                        </td>

                                        <td class="clstd">
                                            <select class="form-control" kendo-drop-down-list name="MC_FAB_PROD_ORD_H_ID" k-option-label="'--Style --'"
                                                    k-data-text-field="'STYLE_NO'" k-data-value-field="'MC_FAB_PROD_ORD_H_ID'" k-filter="'Contains'"
                                                    k-template="template" k-value-template="valueTemplate"
                                                    k-auto-bind="'true'" k-data-source="StyleExtDs" ng-model="search.MC_FAB_PROD_ORD_H_ID"
                                                    k-on-change="onFabOrderChange(kendoEvent)" required></select>
                                        </td>
                                        <td class="clstd">
                                            <select class="form-control" kendo-drop-down-list name="MC_FAB_PROD_ORD_H_ID" k-option-label="'--Order# --'"
                                                    k-data-text-field="'ORDER_NO_LST'" k-data-value-field="'MC_FAB_PROD_ORD_H_ID'" k-filter="'Contains'"
                                                    k-template="templateOh" k-value-template="valueTemplateOh"
                                                    k-auto-bind="'true'" k-data-source="FabOederByOhDs" ng-model="search.MC_FAB_PROD_ORD_H_ID"
                                                    required style="width:100%;"></select>

                                        </td>

                                        <td class="clstd">
                                            <button class="btn btn-sm" ng-click="showFabProdOrderList();"><i class='fa fa-search'></i></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </fieldset>
                <div style="padding:5px;">
                    <kendo-grid k-options="gridOptions" id="FabProdOrderGrid" k-data-source="gridOptionsDs">
                        <div k-detail-template>
                            <div>
                                <div kendo-grid k-options="detailGridOptionsForSupp(dataItem)"></div>
                            </div>
                        </div>

                    </kendo-grid>
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/x-kendo-template" id="JobCardDashBoardTemplate">
    <div class="toolbar">
        <div class="actions">

            <form class="form-horizontal" role="form" name="JobCardDashBoard" novalidate
                  ng-submit="getJobCardList(form.MC_BYR_ACC_ID,form.MC_BUYER_ID,form.MC_STYLE_H_EXT_ID)">
                <label class="col-md-1 control-label" align="right">
                    Buyer A/C
                </label>
                <div class="col-md-2" style="padding-left:0px;padding-right:5px;">

                    <select kendo-drop-down-list name="MC_BYR_ACC_ID" class="form-control"
                            k-options="buyerAcList" id="MC_BYR_ACC_ID" ng-model="form.MC_BYR_ACC_ID"></select>
                </div>
                <label class="col-md-1 control-label" align="right" style="padding-left:0px;padding-right:10px;">
                    Buyer
                </label>

                <div class="col-md-2" style="padding-left:0px;padding-right:5px;">
                    <select class="form-control" kendo-drop-down-list name="MC_BUYER_ID" k-option-label="'-- Select Buyer --'"
                            k-data-text-field="'BUYER_NAME_EN'" k-data-value-field="'MC_BUYER_ID'"
                            k-auto-bind="'true'" k-data-source="BuyerListDs" ng-model="form.MC_BUYER_ID"
                            k-on-data-bound="buyerListOnBound(kendoEvent)" k-on-change="buyerListOnChange(kendoEvent)"></select>
                </div>

                <label class="col-md-1 control-label" align="right" style="padding-left:0px;padding-right:10px;">
                    Style
                </label>

                <div class="col-md-2" style="padding-left:0px;padding-right:0px;">
                    <select class="form-control" kendo-drop-down-list name="MC_STYLE_H_EXT_ID" k-option-label="'-- Select Style --'"
                            k-data-text-field="'STYLE_NO'" k-data-value-field="'MC_STYLE_H_EXT_ID'"
                            k-auto-bind="'true'" k-data-source="StyleExtDs" ng-model="form.MC_STYLE_H_EXT_ID"></select>
                </div>

                <div class="col-md-1">
                    <button type="submit" class="btn btn-sm default">
                        <i class="fa fa-search"></i> Load
                    </button>
                </div>
            </form>

        </div>
    </div>
</script>

@*<script type="text/ng-template" id="UnAssignQtyModal.html">
    <div class="modal-body">
        <div class="portlet grey-cascade box">
            <div class="portlet-title">
                <div>
                    <h3 style="padding-top:10px;margin-top:3px;">
                        Job Card Cancel or Unassign Qty [Ref # {{form.JOB_CRD_NO}}]
                        <span class="pull-right"><i class="fa fa-times red" ng-click="cancel()"></i></span>
                    </h3>
                </div>
            </div>
            <div class="portlet-body">
                <form class="form-horizontal" role="form" name="UnAssignQtyModalForm" novalidate>
                    <div class="form-group">
                        <label class="col-md-3 control-label">
                            Assign Qty
                        </label>
                        <div class="col-md-3" style="padding-top:5px;">
                            <input type="text" class="form-control" ng-model="form.ASIGN_QTY" disabled>
                        </div>
                        <label class="col-md-2 control-label">
                            Production
                        </label>
                        <div class="col-md-3" style="padding-top:5px;">
                            <input type="text" class="form-control" ng-model="form.PROD_QTY" disabled>
                        </div>
                    </div>



                    <div class="form-group">
                        <label class="col-md-3 control-label">
                            Un Assign Qty
                        </label>
                        <div class="col-md-3" style="padding-top:5px;" ng-class="{'has-error': (UnAssignQtyModalForm.UN_ASIGN_QTY.$touched || UnAssignQtyModalForm.$submitted) && (UnAssignQtyModalForm.UN_ASIGN_QTY.$error.required||UnAssignQtyModalForm.UN_ASIGN_QTY.$error.max||(form.UN_ASIGN_QTY > (form.ASIGN_QTY - form.REQ_YRN_QTY_DONE)))}">
                            <input type="number" name="UN_ASIGN_QTY" class="form-control" max={{form.UN_ASIGN_QTY_ORI}} ng-model="form.UN_ASIGN_QTY" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-3 control-label">Reason</label>
                        <div class="col-md-8" style="padding-top:5px;">
                            <textarea rows="2" name="PLAN_NOTE" class="form-control" cols="50" ng-model="form.REASON_DESC"></textarea>
                        </div>
                    </div>
                    <div class="form-group form-actions">
                        <div class="col-md-offset-3 col-md-10">
                            <button type="button" class="btn green btn-sm" ng-click="save(form,UnAssignQtyModalForm.$valid);UnAssignQtyModalForm.$submitted=true;">Save</button>
                            <button type="button" class="btn btn-default btn-sm" ng-click="cancel()">Cancel</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</script>*@