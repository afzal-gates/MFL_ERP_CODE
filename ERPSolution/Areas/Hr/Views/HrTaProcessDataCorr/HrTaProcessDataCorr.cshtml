@*@functions{
    public string GetAntiForgeryToken()
    {
        string cookieToken, formToken;
        AntiForgery.GetTokens(null, out cookieToken, out formToken);
        return cookieToken + ":" + formToken;
    }
}*@

<ul class="page-breadcrumb breadcrumb">
    <li>
        <a href="index.html">MultiTex ERP</a>

    </li>
    <li>
        <a href="#">Hr</a>

    </li>
    <li>
        <a href="#"> Manual Attendance Correction</a>
    </li>
</ul>



<div class="portlet box blue-dark">

    <div class="portlet-title">
        <div class="caption">
            @*<i class="fa fa-gift"></i>*@ Manual Attendance Correction
        </div>
        <div class="tools">
            @*<a href="javascript:;" class="collapse">
                </a>*@
            @*<a href="#portlet-config" data-toggle="modal" class="config">
                </a>
                <a href="javascript:;" class="reload">
                </a>*@
            @*<a href="javascript:;" class="remove">
                </a>*@
        </div>
    </div>

    <div class="portlet-body">

        <form class="form-horizontal">

            <div class="row" style="margin:auto;">
                    <fieldset class="custom-fieldset" style="padding-top: 0px; border-top-width: 1px; border-bottom-width: 1px;">
                        <legend class="custom-legend" style="
                                height:3px;"></legend>

                        <div class="form-group">

                            <label class="col-md-1 control-label text-align-reverse">
                                Period
                            </label>
                            <div class="col-md-2">
                                <select class="form-control" ng-model="vm.form.RF_FISCAL_YEAR_ID" ng-options="item.RF_FISCAL_YEAR_ID as item.FY_VALUE_1 for item in vm.FiscalYearData"></select>
                            </div>

                            <div class="col-md-2">
                                <select class="form-control" ng-model="vm.form.MONTH_VALUE" ng-options="item.MONTH_VALUE as item.MONTH_NAME_EN for item in vm.monthListData"></select>
                            </div>





                            <label class="col-md-1 control-label text-align-reverse">
                                Company
                            </label>


                            <div class="col-md-2">
                                <select class="form-control" ng-model="vm.form.HR_COMPANY_ID" ng-options="item.HR_COMPANY_ID as item.COMP_NAME_EN for item in vm.companyData"></select>
                            </div>

                            <label class="col-md-1 control-label text-align-reverse">
                                Office
                            </label>


                            <div class="col-md-3">
                                <select kendo-drop-down-list id="HR_OFFICE_ID" name="HR_OFFICE_ID" class="form-control"
                                        options="vm.officeListData" ng-model="vm.form.HR_OFFICE_ID"></select>
                            </div>
                        </div>

                    </fieldset>
            </div>

            <div class="row" style="margin:auto;">
                    <fieldset class="custom-fieldset" style="padding-top: 0px; border-top-width: 1px; border-bottom-width: 1px;">
                        <legend class="custom-legend">Select Correction Type</legend>

                        <div class="form-group">
                            <label class="col-md-2 control-label"></label>
                            <div class="col-md-10">

                                <div class="radio-list" style="margin-left:20px" ng-init="vm.form.CORRECTION_TYPE='Daily Attendance Correction'">
                                    <label class="radio-inline">
                                        <span class="checked"><input type="radio" ng-model="vm.form.CORRECTION_TYPE" name="optionsRadios" ng-value="'Attendance Confirmation'"></span>Attendance Confirmation for Miss Punch
                                    </label>
                                    <label class="radio-inline">
                                        <span class=""><input type="radio" ng-model="vm.form.CORRECTION_TYPE" name="optionsRadios" ng-value="'Daily Attendance Correction'"></span>Daily Attendance Correction
                                    </label>

                                    <label class="radio-inline">
                                        <span class=""><input type="radio" ng-model="vm.form.CORRECTION_TYPE" name="optionsRadios" ng-value="'Target OT Setup'"></span>Target OT Setup
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group" ng-if="vm.form.CORRECTION_TYPE=='Attendance Confirmation'">

                            <label class="col-md-2 control-label">
                                Reason
                            </label>


                            <div class="col-md-3">
                                <select class="form-control" ng-model="vm.form.LK_PN_COR_REASON_ID" ng-options="item.LOOKUP_DATA_ID as item.LK_DATA_NAME_EN for item in vm.corrReason" ng-disabled="vm.form.IS_CORRECTION_REASON_OTHER=='Y'"></select>
                            </div>

                            <div class="col-md-1">
                                <div class="checkbox-list">
                                    <label class="checkbox-inline" ng-init="vm.form.IS_CORRECTION_REASON_OTHER='N'">
                                        <span><input type="checkbox" ng-model="vm.form.IS_CORRECTION_REASON_OTHER" ng-true-value="'Y'" ng-false-value="'N'"></span> Other
                                    </label>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <textarea rows="2" cols="50" class="form-control" ng-disabled="vm.form.IS_CORRECTION_REASON_OTHER=='N'" ng-model="vm.form.CORRECTION_REASON_OTHER"></textarea>
                            </div>



                        </div>



                        @*<div class="form-group">

                        <label class="col-md-4 control-label">

                        </label>


                        <div class="col-md-6">
                            <div class="checkbox-list" style="padding-top:-10px;">
                                <label class="checkbox-inline" style="margin-left:20px">
                                    <span><input type="checkbox" ng-model="vm.form.IS_CORRECTION_REASON_OTHER" ng-true-value="'Y'" ng-false-value="'N'"></span> Others, Write Here...
                                </label>
                            </div>
                        </div>


                    </div>*@




                    </fieldset>
            </div>

            <div class="row" style="margin:auto;">
                <div class="col-md-6" style="padding:0px;">
                    <fieldset class="custom-fieldset" style="padding-top: 0px; border-top-width: 1px; border-bottom-width: 1px;">
                        <legend class="custom-legend">Select Punch Type</legend>

                        <div class="form-group">
                            <label class="col-md-2 control-label"></label>
                            <div class="col-md-10">

                                <div class="radio-list" style="margin-left:20px" ng-init="vm.form.PUNCH_TYPE=105">
                                    <label class="radio-inline">
                                        <span class="checked"><input type="radio" ng-model="vm.form.PUNCH_TYPE" name="PUNCH_TYPE" ng-value="105" checked=""></span>Punch In
                                    </label>
                                    <label class="radio-inline">
                                        <span class=""><input type="radio" ng-model="vm.form.PUNCH_TYPE" name="PUNCH_TYPE" ng-value="106" checked=""></span>Punch Out
                                    </label>

                                    <label class="radio-inline">
                                        <span class=""><input type="radio" ng-model="vm.form.PUNCH_TYPE" name="PUNCH_TYPE" ng-value="107" checked=""></span>Punch In-Out
                                    </label>

                                    <label class="radio-inline">
                                        <span class=""><input type="radio" ng-model="vm.form.PUNCH_TYPE" name="PUNCH_TYPE" ng-value="437" checked=""></span>Day Type
                                    </label>

                                    <label class="radio-inline">
                                        <span class=""><input type="radio" ng-model="vm.form.PUNCH_TYPE" name="PUNCH_TYPE" ng-value="629" checked=""></span> Late Punch Approval
                                    </label>


                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>
                <div class="col-md-6" style="padding:0px;">
                    <fieldset class="custom-fieldset" style="padding-top: 0px; border-top-width: 1px; border-bottom-width: 1px;">
                        <legend class="custom-legend">Select Status</legend>

                        <div class="form-group">
                            <label class="col-md-2 control-label"></label>
                            <div class="col-md-10">
                                <div class="radio-list" style="margin-left:20px">
                                    <label class="radio-inline">
                                        <span class="checked"><input type="radio" ng-model="vm.form.CORRECTED_STATUS" name="CORRECTED_STATUS" ng-value="'P,L,A,W,H,F'"></span>All
                                    </label>
                                    <label class="radio-inline">
                                        <span class=""><input type="radio" ng-model="vm.form.CORRECTED_STATUS" name="CORRECTED_STATUS" ng-value="'P,L'"></span>P
                                    </label>

                                    <label class="radio-inline">
                                        <span class=""><input type="radio" ng-model="vm.form.CORRECTED_STATUS" name="CORRECTED_STATUS" ng-value="'A'"></span>A
                                    </label>
                                    <label class="radio-inline">
                                        <span class=""><input type="radio" ng-model="vm.form.CORRECTED_STATUS" name="CORRECTED_STATUS" ng-value="'W'"></span>W
                                    </label>
                                    <label class="radio-inline">
                                        <span class=""><input type="radio" ng-model="vm.form.CORRECTED_STATUS" name="CORRECTED_STATUS" ng-value="'H'"></span>H
                                    </label>
                                    <label class="radio-inline">
                                        <span class=""><input type="radio" ng-model="vm.form.CORRECTED_STATUS" name="CORRECTED_STATUS" ng-value="'F'"></span>F
                                    </label>

                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>
             
            <div class="row" style="margin:auto;">
                <fieldset class="custom-fieldset" style="padding-top: 0px; border-top-width: 1px; border-bottom-width: 1px;">
                    <legend class="custom-legend">Select Date Range</legend>

                    <div class="form-group">

                        <div class="col-md-6">
                            <label class="col-md-4 control-label">Form</label>
                            <div class="col-md-6 input-group">
                                <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="vm.form.FROM_DATE" is-open="FROM_DATEopened"  datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" />
                                <span class="input-group-btn">
                                    <button type="button" class="btn-calendar" ng-click="FROM_DATEopen($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                                </span>
                            </div>

                        </div>
                        <div class="col-md-6">

                            <label class="col-md-2 control-label">To</label>
                            <div class="col-md-6 input-group">
                                <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="vm.form.TO_DATE" is-open="TO_DATEopened" min-date="vm.form.FROM_DATE" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" />
                                <span class="input-group-btn">
                                    <button type="button" class="btn-calendar" ng-click="TO_DATEopen($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                                </span>
                            </div>
                        </div>






                    </div>

                </fieldset>
            </div>

            <div class="row" style="margin:auto;">
                    <fieldset class="custom-fieldset" style="padding-top: 0px; border-top-width: 1px; border-bottom-width: 1px;">
                        <legend class="custom-legend">Select Employee</legend>

                        <div class="form-group" ng-init="vm.form.employeeSelect='Individual'">
                            <label class="col-md-2 control-label"></label>
                            <div class="col-md-10">

                                <div class="radio-list" style="margin-left:20px">
                                    <label class="radio-inline">
                                        <span class="checked"><input type="radio" ng-model="vm.form.employeeSelect" ng-value="'Batch'"></span>By Batch
                                    </label>
                                    <label class="radio-inline">
                                        <span class=""><input type="radio" ng-model="vm.form.employeeSelect" ng-value="'Individual'"></span>By Individual
                                    </label>

                                    <label class="radio-inline">
                                        <span class=""><input type="radio" ng-model="vm.form.employeeSelect" ng-value="'Random'"></span> By Random Employee
                                    </label>


                                </div>
                            </div>
                        </div>

                        <div class="form-group" ng-if="vm.form.employeeSelect=='Batch'">
                            <div class="col-md-2">
                                Department
                                <select kendo-drop-down-list name="CORE_DEPT_ID" class="form-control"
                                        options="vm.parentDepartmentListData" ng-model="vm.form.CORE_DEPT_ID"></select>
                            </div>
                            <div class="col-md-2">
                                Section
                                <select kendo-drop-down-list id="HR_DEPARTMENT_ID" name="HR_DEPARTMENT_ID" class="form-control"
                                        options="vm.subdepartmentListData" ng-model="vm.form.HR_DEPARTMENT_ID"></select>
                            </div>

                            <div class="col-md-1">
                                Team <span style="float:right;"><input type="checkbox" ng-model="Team" ng-change="!Team?vm.form.HR_SHIFT_TEAM_ID='':vm.form.HR_SHIFT_TEAM_ID" /> </span>

                                <select class="form-control" ng-disabled="!Team" ng-model="vm.form.HR_SHIFT_TEAM_ID" ng-options="item.HR_SHIFT_TEAM_ID as item.SHIFT_TEAM_NAME_EN for item in vm.shiftTeamListData"></select>
                            </div>


                            <div class="col-md-1">
                                Floor<span style="float:right;"><input type="checkbox" ng-model="floor" ng-change="!floor?vm.form.FLOOR='':vm.form.FLOOR" /> </span>
                                <select class="form-control" ng-disabled="!floor" ng-model="vm.form.FLOOR" ng-options="item.LOOKUP_DATA_ID as item.LK_DATA_NAME_EN for item in vm.floorDatas"></select>
                            </div>

                            <div class="col-md-1">
                                Line<span style="float:right;"><input type="checkbox" ng-model="Line" ng-change="!Line?vm.form.LINE_NO='':vm.form.LINE_NO" /> </span>
                                <select class="form-control" name="LINE_NO" ng-model="vm.form.LINE_NO" ng-disabled="!Line"
                                        ng-options="Item.LINE_NO as Item.LINE_NO for Item in vm.lineListData"></select>
                            </div>

                            <div class="col-md-1">
                                OT<span style="float:right;"><input type="checkbox" ng-model="OT_HR" ng-change="!OT_HR?vm.form.OT_HR='':vm.form.OT_HR" /> </span>
                                <input type="text" class="form-control"  ng-model="vm.form.OT_HR" ng-disabled="!OT_HR"/>
                            </div>

                            <div class="col-md-2">
                                Empl Type<span style="float:right;"><input type="checkbox" ng-model="EMPLOYEE_TYPE_ID" ng-change="!EMPLOYEE_TYPE_ID?vm.form.EMPLOYEE_TYPE_ID=null:vm.form.EMPLOYEE_TYPE_ID" /> </span>
                                <select class="form-control" name="EMPLOYEE_TYPE_ID" ng-model="vm.form.EMPLOYEE_TYPE_ID" ng-disabled="!EMPLOYEE_TYPE_ID">
                                    <option value="2">Staff</option>
                                    <option value="8">Worker</option>

                                </select>
                            </div>

                            <div class="col-md-2">
                                Day Type<span style="float:right;"><input type="checkbox" ng-model="HR_DAY_TYPE_ID" ng-change="!HR_DAY_TYPE_ID?vm.form.HR_DAY_TYPE_ID=null:vm.form.HR_DAY_TYPE_ID" /> </span>
                                <select class="form-control" name="HR_DAY_TYPE_ID" ng-model="vm.form.HR_DAY_TYPE_ID" ng-disabled="!HR_DAY_TYPE_ID"
                                        ng-options="Item.HR_DAY_TYPE_ID as Item.DAY_TYPE_NAME_EN for Item in vm.dayTypeList"></select>
                            </div>

                        </div>

                        <div class="form-group" ng-if="vm.form.employeeSelect=='Random'">
                            <label class="col-md-2 control-label">

                            </label>
                            <div class="col-md-5">

                                <div class="scrollable" slimscroll="{height: 50,alwaysVisible:true,allowPageScroll:true}">

                                    <table class="table table-striped table-hover table-condensed" ng-if="vm.ME">
                                        <tbody>
                                            <tr ng-repeat="b in vm.ME | orderBy:'$index':true">
                                                <td>
                                                    {{vm.ME.length-$index}}
                                                </td>
                                                <td>
                                                    {{vm.ME[vm.ME.length-$index-1].EMPLOYEE_CODE}}
                                                </td>
                                                <td>
                                                    {{vm.ME[vm.ME.length-$index-1].EMP_FULL_NAME_EN}}
                                                </td>

                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                        </div>


                        <div class="form-group" ng-if="vm.form.employeeSelect=='Random'">
                            <div class="col-md-12" style="font-size:10px;">    
                                    <oi-select oi-options="item.EMPLOYEE_CODE for item in emoloyeeAutoMulti($query) track by item.EMPLOYEE_CODE"
                                                    ng-model="vm.ME"
                                                    multiple
                                                    placeholder="Search...">

                                    </oi-select>  
                                <a class="red btn-icon-only" ng-click="vm.resetME()">
                                    <i class="fa fa-times">&nbsp;Clear All</i>                 
                                </a>
                            </div>
                        </div>



                        <div class="form-group" ng-if="vm.form.employeeSelect=='Individual'">
                            <label class="col-md-2 control-label">

                            </label>
                            <div class="col-md-4">

                                <oi-select oi-options="item.EMPLOYEE_CODE for item in emoloyeeAutoMulti($query)"
                                                ng-model="vm.SE"
                                                placeholder="Search..."></oi-select>
                            </div>
                            <div class="col-md-4">
                                <div class="table-responsive" ng-if="vm.SE">
                                    <table class="table table-striped table-hover">
                                        <tbody>
                                            <tr>
                                                <td>
                                                    {{vm.SE.EMPLOYEE_CODE}}
                                                </td>
                                                <td>
                                                    {{vm.SE.EMP_FULL_NAME_EN}}
                                                </td>

                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>


                        </div>

                    </fieldset>
            </div>

            <br />

            <div class="row">

                <div class="col-md-12" align="right">
                    <button type="button" class="btn btn-sm purple" ng-click="vm.submitData()"><i class="fa fa-refresh"></i> Show</button>
                    <button type="button" ui-sref="HrTaProcessDataCorr()" ui-sref-opts="{reload: true}" class="btn btn-sm default">Cancel</button>
                </div>
            </div>
           
             <div ui-view class="shuffle-animation" style="margin-left:10px;margin-right:15px;">
            </div>

        </form>
    </div>
</div>
