<style>
    .hideMaster {
        display: none;
    }
</style>
<ul class="page-breadcrumb breadcrumb">
    <li>
        <a href="index.html">MultiTex ERP</a>

    </li>
    <li>
        <a href="#">Dyeing</a>

    </li>
    <li>
        <a href="#" ng-bind="vm.Title"></a>
    </li>
</ul>

<div class="portlet box blue-dark">
    <div class="portlet-title">
        <div class="caption" ng-bind="vm.Title">
        </div>
        <div class="caption">

        </div>
    </div>


    <div class="portlet-body form">
        <form name="formData" class="form-horizontal" style="background-color: white;">
            <div id="splash-page" data-ng-show="vm.showSplash" class="dissolve-animation">
                <div class="page-splash">
                    <div class="page-splash-message">
                        <img src="~/Content/assets/global/img/ajax-loading.gif" />  <b>Please wait ....</b>
                    </div>
                </div>
            </div>

            <div class="form-body clearfix">
                <div class="form-group">
                    <div class="col-md-12">

                        <fieldset class="custom-fieldset" ng-hide="collepsMaster">
                            <legend class="custom-legend"><b>Production</b></legend>
                            <div><label id="lblMsg"></label></div>

                            <div class="form-group">

                                <div class="col-md-1">
                                </div>
                                <label class="control-label col-md-2 ">
                                    <span aria-required="true" class="required">*</span>
                                    Requisition No
                                </label>
                                <div class="col-md-2">
                                    <input type="text" name="STR_REQ_NO" placeholder="Scan Requisition Barcode" ng-model="vm.form.STR_REQ_NO" class="form-control" />
                                </div>
                                <div class="col-md-1">
                                    <a class="btn btn-sm yellow-gold" ng-click="vm.getRequisitionInfo()">Load</a>
                                </div>

                                <label class="control-label col-md-2" style="padding:0px;">
                                    <span aria-required="true" class="required">*</span>
                                    Production Date
                                </label>
                                <div class="col-md-2">
                                    <input type="text" class="form-control required" ng-click="STR_REQ_DT_LNopen($event)" ng-focus="STR_REQ_DT_LNopen($event)" datepicker-popup="{{vm.dtFormat}}"
                                           name="STR_REQ_DT" max-date="vm.today" ng-model="vm.form.STR_REQ_DT" is-open="STR_REQ_DT_LNopened" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" close-text="Close"
                                           required />
                                </div>

                            </div>



                            <fieldset class="custom-fieldset" ng-hide="collepsMaster">
                                <legend class="custom-legend"><b>Requisition Info</b></legend>

                                <div class="form-group">

                                    <div class="col-md-1">
                                    </div>
                                    <label class="control-label col-md-2 ">
                                        <span aria-required="true" class="required">*</span>
                                        Company
                                    </label>
                                    <div class="col-md-2">
                                        <select kendo-drop-down-list name="HR_COMPANY_ID" id="HR_COMPANY_ID" class="form-control required"
                                                options="vm.companyList" ng-model="vm.form.HR_COMPANY_ID" tabindex="5" required></select>

                                    </div>

                                    <div class="col-md-1">
                                    </div>

                                    <label class="control-label col-md-2">
                                        <span aria-required="true" class="required">*</span>
                                        Department
                                    </label>
                                    <div class="col-md-2">
                                        <select kendo-drop-down-list name="HR_DEPARTMENT_ID" id="HR_DEPARTMENT_ID" class="form-control required"
                                                options="vm.departmentList" ng-model="vm.form.HR_DEPARTMENT_ID" tabindex="5" required></select>
                                        <input type="hidden" id="LOAD_TIME" name="LOAD_TIME" ng-model="vm.form.LOAD_TIME" />
                                        <input type="hidden" id="UNLOAD_TIME" name="UNLOAD_TIME" ng-model="vm.form.UNLOAD_TIME" />

                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="col-md-1"></div>

                                    <label class="control-label col-md-2">
                                        <span aria-required="true" class="required">*</span>
                                        Machine No
                                    </label>
                                    <div class="col-md-2">

                                        <select class="form-control required" kendo-drop-down-list name="DYE_MACHINE_ID" id="DYE_MACHINE_ID" k-option-label="'-- Select Machine --'"
                                                k-data-text-field="'DYE_MACHINE_NO'" k-data-value-field="'DYE_MACHINE_ID'"
                                                k-auto-bind="'true'" k-data-source="vm.machineList" k-ng-delay="vm.machineList" k-filter="'contains'"
                                                ng-model="vm.form.DYE_MACHINE_ID"></select>
                                    </div>

                                    <div class="col-md-1"></div>

                                    <label class="col-md-2 control-label">
                                        <span aria-required="true" class="required"></span>
                                        Requisition To
                                    </label>
                                    <div class="col-md-2">
                                        <select id="customers" kendo-drop-down-list options="vm.userList" ng-model="vm.form.STR_REQ_TO" class="form-control" style="width:100%;"></select>

                                    </div>

                                </div>
                                
                                <div class="form-group">

                                    <div class="col-md-1">
                                    </div>
                                    <label class="control-label col-md-2 ">
                                        <span aria-required="true" class="required"></span>
                                        Remarks
                                    </label>
                                    <div class="col-md-7">
                                        <textarea id="REMARKS" name="REMARKS" ng-model="vm.form.REMARKS" class="form-control"></textarea>
                                    </div>

                                </div>


                                <div style="padding:3px;">
                                </div>



                            </fieldset>


                            <fieldset class="custom-fieldset" ng-hide="collepsMaster">
                                <legend class="custom-legend"><b>Requisition Details</b></legend>

                                <table class="clsTableMtex" style="width:100%">
                                    <tr class="clstheadMtex">

                                        <td class="clstdMtex">
                                            SL #
                                        </td>
                                        @*<td class="clstdMtex">
                                            Agent
                                        </td>*@
                                        <td class="clstdMtex">
                                            Item Name
                                        </td>

                                        <td class="clstdMtex">
                                            KG
                                        </td>
                                        <td class="clstdMtex">
                                            GM
                                        </td>
                                        <td class="clstdMtex">
                                            MG
                                        </td>
                                        <td class="clstdMtex">
                                            Total(GM)
                                        </td>
                                        <td class="clstdMtex">
                                            Sub Stock
                                        </td>
                                        <td class="clstdMtex">
                                            Central Stock
                                        </td>
                                    </tr>
                                    <tr class="clstdMtex" ng-repeat="preItem in vm.recipeItemList">

                                        <td class="clstdMtex" style="width:5%">
                                            {{$index+1}}
                                        </td>
                                        @*<td class="clstdMtex">

                                            <select kendo-drop-down-list name="DC_AGENT_ID" id="DC_AGENT_ID" class="form-control required" style="max-width:200px;" k-auto-bind="'true'" ng-disabled="preItem.DYE_DOSE_TMPLT_D_ID>0"
                                                    options="vm.itemCategoryList" ng-model="preItem.DC_AGENT_ID" k-on-change="vm.getItemListByCatID(preItem,$index)"></select>

                                            <input type="hidden" ng-model="preItem.DYE_STR_REQ_D_ID" />

                                        </td>*@
                                        <td class="clstdMtex">

                                            <select class="form-control requiredSub" kendo-drop-down-list name="INV_ITEM_ID-{{$index}}" k-option-label="'-- Select Dyes Chemical --'"
                                                    k-data-text-field="'ITEM_NAME_EN'" k-data-value-field="'INV_ITEM_ID'" style="max-width:250px;"
                                                    k-auto-bind="'true'" k-data-source="preItem.ItemList" ng-k-delay="preItem.ItemList"
                                                    k-filter="'contains'" ng-model="preItem.INV_ITEM_ID" k-on-change="vm.getStockQty(preItem)"></select>

                                        </td>

                                        <td class="clstdMtex">
                                            <input type="number" ng-model="preItem.RQD_QTY_K" style="width: 100%; text-align: right" readonly />
                                        </td>
                                        <td class="clstdMtex">
                                            <input type="number" ng-model="preItem.RQD_QTY_G" style="width: 100%; text-align: right" min="0" max="999" readonly />
                                        </td>
                                        <td class="clstdMtex">
                                            <input type="number" ng-model="preItem.RQD_QTY_M" style="width: 100%; text-align: right" min="0" max="999" readonly />
                                        </td>
                                        <td class="clstdMtex" style="text-align:right;">
                                            <input type="text" ng-model="preItem.RQD_QTY" class="double" style="width: 100%; text-align: right" readonly />

                                        </td>
                                        <td class="clstdMtex" style="text-align:right;">
                                            {{preItem.SUB_STK}}
                                        </td>
                                        <td class="clstdMtex" style="text-align:right;">
                                            {{preItem.CENTRAL_STK}}
                                        </td>

                                    </tr>
                                </table>

                            </fieldset>


                    </div>

                    <div style="padding:3px;">
                    </div>

                </div>

                <div style="padding:3px;">
                </div>
                <fieldset class="custom-fieldset">
                    <div class="form-group">
                        <div class="col-md-4">
                            <a title="Start" ng-click="vm.submitAll(vm.form,0)" ng-if="vm.form.IS_PRODUCTION=='N'" class="btn btn-small green"><i class="fa fa-save"> Load</i></a>
                            <a title="Complete" ng-click="vm.submitAll(vm.form,1)" ng-if="vm.form.IS_PRODUCTION=='L'" class="btn btn-small green"><i class="fa fa-save"> Complete</i></a>

                        </div>

                    </div>
                </fieldset>
            </div>
        </form>

    </div>
</div>
