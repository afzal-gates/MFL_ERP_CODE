
<div class="row">
    <div class="col-md-12 ">
        <!-- BEGIN Portlet PORTLET-->
        <div class="portlet solid">
            <div class="portlet-title" style="margin-bottom: 0px; background-color: transparent;">
                <div class="row" style="padding-top: 10px;font-size:14px;">
                    <div class="col-md-8">



                        <div class="btn-group btn-group" ng-click="itm.IS_ACTIVE = !itm.IS_ACTIVE;vm.loadData()" style="padding:3px;" ng-repeat="itm in FloorList">
                            <a class="btn default btn-xs" style="color: #070a15;" ng-style="{'background-color':itm.IS_ACTIVE?'#f3c205':''}">
                                <b>{{itm.FLOOR_DESC_EN}}</b>
                            </a>
                        </div>
                        &nbsp;&nbsp;
                        <span id="start" style="color:red;"></span> <a onclick="picker.show(); return false;">Change</a>&nbsp;&nbsp;<a style="color:white;" ng-click="vm.ChangeDataByDate(null)">Today</a>
                    </div>

                    <div class="col-md-4" align="right">


                        <button class="btn btn-xs" ng-click="vm.openConfigModal()" style="color: #070a15;">
                            <span class="item"> <span aria-hidden="true" class="icon-settings"></span>&nbsp;<b>Setting</b> </span>
                        </button>

                        <button class="btn btn-xs" style="color: #070a15;">
                            <a href="/">
                                <span class="item"> <span aria-hidden="true" class="icon-home"></span></span>
                            </a>
                        </button>

                        <div class="btn-group btn-group">
                            <div class="checkbox-list" style="margin-top:8px;">
                                <label class="checkbox-list">
                                    <span style="color:white;"><input type="checkbox" ng-model="IS_AUTO_CHANGE" ng-click="vm.onOutoChangeChecked(IS_AUTO_CHANGE)"> Auto Change</span>
                                </label>
                            </div>
                        </div>

                    </div>





                </div>

                <script type="text/javascript">
                    var picker = new DayPilot.DatePicker({
                        target: 'start',
                        pattern: 'dd-MMM-yyyy',
                        onTimeRangeSelected: function (args) {
                            window.ChangeDataByDate(args.start);
                        }
                    });
                </script>
            </div>



            <div class="portlet-body" style="color: #f3c200;font-weight:700">
                <table class="table table-condensed table-bordered">
                    <thead style="text-align: center; ">
                        <tr style="background-color: #091a44; ">
                            <th rowspan="2" width="6%" style="color: #8dd4d8; ">
                                Line
                            </th>

                            <th colspan="2" width="4%" style="text-align: center; color: #8dd4d8;">
                                Present/Req.
                            </th>

                            <th colspan="2" width="6%" style="text-align: center; color: #8dd4d8;">
                                Used
                            </th>

                            <th rowspan="2" width="3%" style="color: #8dd4d8; ">
                                Buyer
                            </th>
                            <th rowspan="2" width="3%" style="color: #8dd4d8; ">
                                St./Order
                            </th>
                            <th rowspan="2" width="2%" style="color: #8dd4d8; ">
                                SMV
                            </th>
                            <th rowspan="2" width="2%" style="color: #8dd4d8; ">
                                Day
                            </th>

                            <th rowspan="2" width="4%" style="color: #8dd4d8; ">
                                <span style="display:block;">
                                    TPH/
                                </span>
                                <span style="display:block;">
                                    T.Eff.
                                </span>
                            </th>

                            <th colspan="8" width="24%" style="text-align: center; color: #8dd4d8;">
                                General Hour Production
                            </th>


                            <th colspan="3" width="9%" style="text-align: center; color: #8dd4d8;">
                                Over Time
                            </th>

                            <th colspan="2" width="8%" style="text-align: center; color: #8dd4d8;">
                                Total
                            </th>

                            <th rowspan="2" width="4%" style="color: #8dd4d8; ">
                                Achv.<br /> (%)
                            </th>
                            <th rowspan="2" width="4%" style="color: #8dd4d8; ">
                                <span style="display:block;">
                                    Effi.
                                </span>
                                <span style="display:block;">
                                    (%)
                                </span>
                            </th>

                            <th rowspan="2" width="4%" style="color: #8dd4d8; ">
                                Value <br /> ($)
                            </th>

                            <th colspan="3" width="12%" style="text-align: center; color: #8dd4d8;">
                                Cumulative Total
                            </th>


                        </tr>
                        <tr style="background-color: #091a44;">

                            <th width="2%" style="color: #8dd4d8; ">
                                OP
                            </th>
                            <th width="2%" style="color: #8dd4d8; ">
                                HP
                            </th>

                            <th width="3%" style="color: #8dd4d8; ">
                                OP
                            </th>
                            <th width="3%" style="color: #8dd4d8; ">
                                HP
                            </th>

                            <th width="3%" style="color: #8dd4d8; ">
                                1
                            </th>
                            <th width="3%" style="color: #8dd4d8; ">
                                2
                            </th>
                            <th width="3%" style="color: #8dd4d8; ">
                                3
                            </th>
                            <th width="3%" style="color: #8dd4d8; ">
                                4
                            </th>
                            <th width="3%" style="color: #8dd4d8; ">
                                5
                            </th>
                            <th width="3%" style="color: #8dd4d8; ">
                                6
                            </th>
                            <th width="3%" style="color: #8dd4d8; ">
                                7
                            </th>
                            <th width="3%" style="color: #8dd4d8; ">
                                8
                            </th>

                            <th width="3%" style="color: #8dd4d8; ">
                                Tgt
                            </th>

                            <th width="3%" style="color: #8dd4d8; ">
                                Hr
                            </th>

                            <th width="3%" style="color: #8dd4d8; ">
                                Prod.
                            </th>

                            <th width="4%" style="color: #8dd4d8; ">
                                Trgt.
                            </th>
                            <th width="4%" style="color: #8dd4d8; ">
                                Prod.
                            </th>

                            <th width="4%" style="color: #8dd4d8; ">
                                Target
                            </th>
                            <th width="4%" style="color: #8dd4d8; ">
                                Prod.
                            </th>
                            <th width="4%" style="color: #8dd4d8; ">
                                (%)
                            </th>


                        </tr>
                    </thead>

                    <tbody ng-repeat="item in vm.boardData" style="height:500px; overflow-y:hidden;">
                        <tr ng-repeat="itm in item.items" ng-style="{'background-color': $even?'#10162a':''}" ng-if="!vm.isDisabled(item.MergeLine,itm.HR_PROD_LINE_ID)">
                            <td width="4%" rowspan="{{itm.HR_PROD_LINE_ID_SPAN}}" ng-if="itm.HR_PROD_LINE_ID_SL==1" style="border: 1px solid #6f6d6d; border-left: 1px solid #ddd;">


                                <div class="col-md-3" style="padding-left:1px;padding-right:0;">
                                    <h6 style="margin: 0px; font-size: 10px;padding-top:8px;" ng-if="!itm.RF_PFLT_RSN_TYPE_ID">
                                        <span class="label" style="background-color: green;padding-right: 5px; padding-left: 5px;">
                                            &nbsp;&nbsp;&nbsp;
                                        </span>
                                    </h6>

                                    <h6 style="margin: 0px; font-size: 10px; padding-top: 8px;" ng-if="itm.RF_PFLT_RSN_TYPE_ID">
                                        <span class="label" style="background-color: red; padding-right: 5px; padding-left: 5px;cursor:pointer;" popover="{{itm.RSN_TYPE_NAME_EN}}" popover-trigger="mouseenter" popover-placement="right" popover-append-to-body="true">
                                            &nbsp;&nbsp;&nbsp;
                                        </span>
                                    </h6>

                                </div>
                                <div class="col-md-9" style="padding-left:6px;padding-right:0;font-size:16px;"> {{itm.LINE_CODE}}</div>
                            </td>
                            <td width="2%" style="border: 1px solid #6f6d6d; font-size: 13px;">

                                <span>
                                    {{itm.CUR_OPERATOR}}
                                </span>
                                <br />
                                <span style="font-weight: 500; color: #e48f1d; height: 4px;">
                                    <small>{{itm.REQ_OPERATOR}}</small>
                                </span>




                            </td>
                            <td width="2%" style="border: 1px solid #6f6d6d; font-size: 13px; " ">

                                <span>
                                    {{itm.CUR_HELPER}}
                                </span>
                                <br />
                                <span style="font-weight: 500; color: #e48f1d; height: 4px;">
                                    <small>{{itm.REQ_HELPER}}</small>
                                </span>
                            </td>


                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.USE_OPERATOR}}
                            </td>
                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.USE_HELPER}}
                            </td>

                            <td width="3%" style="border: 1px solid #6f6d6d; font-size: 13px;">
                                {{itm.BYR_ACC_NAME_EN}}
                            </td>
                            <td width="3%" style="border: 1px solid #6f6d6d; font-size: 13px;">
                                <span style="font-weight: 500; cursor: pointer; color: #e48f1d;" title="{{itm.STYLE_NO}}">
                                    <small>{{itm.STYLE_NO_S}}</small>
                                </span>
                                <br />
                                <span style="cursor:pointer;" title="{{itm.ORDER_NO}}">
                                    {{itm.ORDER_NO_S}}
                                </span>

                            </td>
                            <td width="2%" style="border: 1px solid #6f6d6d;">
                                {{itm.SMV}}
                            </td>

                            <td width="2%" style="border: 1px solid #6f6d6d;">
                                {{itm.DAYS_RUN}}
                            </td>

                            <td width="4%" style="border: 1px solid #6f6d6d; color: #88ca68; font-size: 15px;">

                                <span style="display:block;">
                                    {{itm.HRLY_TGT_QTY}}
                                </span>
                                <span style="font-weight: 500;color: #e48f1d;height:4px;display:block;font-size:13px;">
                                    <small>[{{itm.HRLY_TGT_EFF||0}}%]</small>
                                </span>

                            </td>

                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.H1_PRD_QTY}}
                            </td>
                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.H2_PRD_QTY}}
                            </td>
                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.H3_PRD_QTY}}
                            </td>
                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.H4_PRD_QTY}}
                            </td>

                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.H5_PRD_QTY}}
                            </td>
                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.H6_PRD_QTY}}

                            </td>
                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.H7_PRD_QTY}}
                            </td>

                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.H8_PRD_QTY}}
                            </td>




                            <td width="3%" style="border: 1px solid #6f6d6d; color: #88ca68;">
                                {{itm.OT_TGT_QTY}}
                            </td>

                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.OT_TGT_HR}}
                            </td>


                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.OT_ACT_PRD_QTY}}
                            </td>

                            <td width="4%" style="border: 1px solid #6f6d6d; color: #88ca68;">
                                {{itm.LN_TTL_TARGET}}
                            </td>
                            <td width="4%" style="border: 1px solid #6f6d6d;">
                                {{itm.LN_TTL_PROD}}
                            </td>

                            <td width="4%" style="border: 1px solid #6f6d6d; color: #acbe40;" rowspan="{{itm.HR_PROD_LINE_ID_SPAN}}" ng-if="itm.HR_PROD_LINE_ID_SL==1">
                                {{itm.LN_ACHV }}
                            </td>
                            <td width="4%" style="border: 1px solid #6f6d6d; color: #acbe40;" rowspan="{{itm.HR_PROD_LINE_ID_SPAN}}" ng-if="itm.HR_PROD_LINE_ID_SL==1">
                                {{itm.LN_EFF }}
                            </td>


                            <td width="4%" style="border: 1px solid #6f6d6d;">
                                {{itm.TTL_VALUE }}
                                <span style="display:block;font-size:10px;">Rate:{{itm.UNIT_PRICE}}$</span>
                            </td>

                            <td width="4%" style="border: 1px solid #6f6d6d; color: #88ca68;">
                                {{itm.CT_TGT_QTY }}
                            </td>
                            <td width="4%" style="border: 1px solid #6f6d6d;">
                                {{itm.CT_PRD_QTY }}
                            </td>
                            <td width="4%" style="border: 1px solid #6f6d6d; border-right: 1px solid #ddd; color: #acbe40; ">
                                {{itm.CT_TGT_QTY!=0?(((itm.CT_PRD_QTY/itm.CT_TGT_QTY)*100)|number:1):0 }}
                            </td>
                        </tr>
                        <tr style="background-color: #091a44;font-size:20px;" ng-if="item.items.length>0">

                            <td width="3%"></td>
                            <td width="2%" style="color: white;font-size:13px;">
                                {{item.TTL_PRE_OP}}<br />
                                {{item.TTL_REQ_OP}}

                            </td>
                            <td width="2%" style="color: white; font-size: 13px;">
                                {{item.TTL_PRE_HP}}<br />
                                {{item.TTL_REQ_HP}}
                            </td>


                            <td width="3%" style="color: white;">
                                {{item.TTL_USE_OP}}
                            </td>
                            <td width="3%" style="color: white;">
                                {{item.TTL_USE_HP}}
                            </td>


                            <td width="21%" colspan="4" align="right" style="color:white;">
                                {{item.FLOOR_DESC_EN}} Total
                            </td>


                            <td width="4%" style="color:white;">
                                {{item.TTL_TARGET}}
                            </td>

                            <td width="3%" style="color:white;">
                                {{item.TTL_H1}}
                            </td>
                            <td width="3%" style="color:white;">
                                {{item.TTL_H2}}
                            </td>
                            <td width="3%" style="color:white;">
                                {{item.TTL_H3}}
                            </td>
                            <td width="3%" style="color:white;">
                                {{item.TTL_H4}}
                            </td>

                            <td width="3%" style="color:white;">
                                {{item.TTL_H5}}
                            </td>
                            <td width="3%" style="color:white;">
                                {{item.TTL_H6}}

                            </td>
                            <td width="3%" style="color:white;">
                                {{item.TTL_H7}}
                            </td>

                            <td width="3%" style="color:white;">
                                {{item.TTL_H8}}
                            </td>




                            <td width="3%" style="color:white;">
                                {{item.TTL_OT_TARGET}}
                            </td>

                            <td width="3%" style="color:white;">
                                {{item.TTL_OT_HR}}
                            </td>


                            <td width="3%" style="color:white;">
                                {{item.TTL_OT_PROD}}
                            </td>

                            <td width="3%" style="color:white;">
                                {{item.G_TARGET}}
                            </td>
                            <td width="3%" style="color:white;">
                                {{item.G_PROD}}
                            </td>

                            <td width="3%" style="color:white;">
                                {{item.G_TARGET_CUR!=0?(((item.G_PROD/item.G_TARGET_CUR)*100)|number:1):0 }}
                            </td>

                            <td width="3%" style="color:white;">
                                {{item.LN_EFF }}
                            </td>
                            <td width="4%" style="color:white;">
                                {{item.G_TTL_VALUE }}
                          
                            </td>

                            <td width="4%" style="color:white;">
                                {{item.TTL_CT_TGT_QTY }}
                            </td>
                            <td width="4%" style="color:white;">
                                {{item.TTL_CT_PRD_QTY }}
                            </td>
                            <td width="4%" style="color:white;">
                                {{item.TTL_CT_TGT_QTY!=0?(((item.TTL_CT_PRD_QTY/item.TTL_CT_TGT_QTY)*100)|number:1):0 }}
                            </td>


                        </tr>


                        <tr ng-repeat="itm in item.datas" ng-style="{'background-color': $even?'#10162a':''}">

                            <td width="6%" colspan="9" style="border: 1px solid #6f6d6d;text-align:right;">
                                {{itm.FP_TYPE_NAME_EN}}
                            </td>

                            <td width="4%" style="border: 1px solid #6f6d6d; color: #88ca68;">
                                {{itm.HRLY_TGT_QTY}}
                            </td>

                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.H1_PRD_QTY}}
                            </td>
                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.H2_PRD_QTY}}
                            </td>
                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.H3_PRD_QTY}}
                            </td>
                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.H4_PRD_QTY}}
                            </td>

                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.H5_PRD_QTY}}
                            </td>
                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.H6_PRD_QTY}}

                            </td>
                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.H7_PRD_QTY}}
                            </td>

                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.H8_PRD_QTY}}
                            </td>




                            <td width="3%" style="border: 1px solid #6f6d6d; color: #88ca68;">
                                {{itm.OT_TGT_QTY}}
                            </td>

                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.OT_TGT_HR}}
                            </td>


                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.OT_ACT_PRD_QTY}}
                            </td>

                            <td width="3%" style="border: 1px solid #6f6d6d; color: #88ca68;">
                                {{itm.LN_TTL_TARGET_F}}
                            </td>
                            <td width="3%" style="border: 1px solid #6f6d6d;">
                                {{itm.LN_TTL_PROD_F}}
                            </td>

                            <td width="3%" style="border: 1px solid #6f6d6d; color: #acbe40; ">
                                {{itm.LN_TTL_TARGET_F!=0?(((itm.LN_TTL_PROD_F/itm.LN_TTL_TARGET_F)*100)|number:1):0 }}
                            </td>
                            <td width="3%" style="border: 1px solid #6f6d6d; color: #acbe40; "></td>

                            <td width="4%" style="border: 1px solid #6f6d6d;"></td>

                            <td width="4%" style="border: 1px solid #6f6d6d; color: #88ca68;">
                                {{itm.CT_TGT_QTY }}
                            </td>
                            <td width="4%" style="border: 1px solid #6f6d6d;">
                                {{itm.CT_PRD_QTY }}
                            </td>
                            <td width="4%" style="border: 1px solid #6f6d6d; border-right: 1px solid #ddd; color: #88ca68;">
                                {{itm.CT_TGT_QTY!=0?(((itm.CT_PRD_QTY/itm.CT_TGT_QTY)*100)|number:1):0 }}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- END Portlet PORTLET-->
    </div>
</div>

<script type="text/ng-template" id="HourlyProductionBoardConfigModal.html">
    <div class="modal-body">
        <div id="splash-page" data-ng-show="showSplash" class="dissolve-animation">
            <div class="page-splash">
                <div class="page-splash-message">
                    <b>Please wait ....</b>
                </div>
            </div>
        </div>

        <div class="portlet grey-cascade box">
            <div class="portlet-title">
                <div>
                    <h3 style="padding-top:10px;margin-top:3px;">
                        <span class="item"> <span aria-hidden="true" class="icon-settings"></span>&nbsp;Production Board Setting</span>
                        <span class="pull-right"><i class="fa fa-times red" ng-click="cancel()"></i></span>
                    </h3>
                </div>
            </div>
            <div class="portlet-body">
                <form role="form" class="form-horizontal">
                    <div style="padding:5px;" class="row">


                        <alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)"><h4 style="margin:0px;">{{alert.msg}}</h4></alert>

                        @*<div class="row" style="padding-bottom:5px;margin:auto;">
                                <div class="input-icon right">
                                    <i class="icon-magnifier" style="margin-top: 6px;"></i>
                                    <input type="text" class="form-control form-control-solid" ng-model-options="{ debounce: { 'default': 500, 'blur': 0 } }" ng-model="q" placeholder="search...">
                                </div>
                            </div>*@

                        <div class="form-group">
                            <label class="col-md-2 control-label">Option</label>
                            <div class="col-md-10">
                                <div class="radio-list">
                                    <label class="radio-inline">
                                        <span class="checked"><input type="radio" name="option" ng-model="option" ng-value="'A'"></span> Any Floor(Auto Change)
                                    </label>
                                    <label class="radio-inline">
                                        <span class="checked"><input type="radio" name="option" ng-model="option" ng-value="'M'"></span> Multiple Floor
                                    </label>
                                    <label class="radio-inline">
                                        <span class="checked"><input type="radio" name="option" ng-model="option" ng-value="'F'"></span> Fixed Floor
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group" ng-show="option=='A'">
                            <label class="col-md-2 control-label">Interval(Sec.)</label>
                            <div class="col-md-3">
                                <input type="number" ng-model="Interval" class="form-control" />
                            </div>
                        </div>


                        <div class="form-group" ng-show="option=='F'">
                            <label class="col-md-5 control-label"></label>
                            <div class="col-md-5">
                                <div class="radio-list">
                                    <label ng-repeat="itm in FloorList">
                                        <input type="radio" name="floor" ng-model="$parent.floor" ng-value="itm.HR_PROD_FLR_ID"> {{itm.FLOOR_DESC_EN}}
                                    </label>
                                </div>
                            </div>
                        </div>


                        <table class="table table-condensed table-striped table-bordered" style="margin-bottom: 0px" ng-if="option=='M'">
                            <thead>
                                <tr>
                                    <th style="width: 50%;">
                                        Floor
                                    </th>
                                    @*<th style="width: 50%;">
                                            Line
                                        </th>*@
                                </tr>
                            </thead>
                        </table>
                        <div slimscroll="{height: 300,allowPageScroll:true,railVisible :true,allowPageScroll :true}" ng-if="option=='M'">
                            <table class="table table-condensed table-striped table-bordered" style="margin-bottom: 3px">
                                <tbody>

                                    <tr ng-repeat="item in lineList">
                                        <td style="width: 50%;" rowspan="{{item.LK_FLOOR_ID_SPAN}}" ng-if="item.LK_FLOOR_ID_SL==1">
                                            <div class="checkbox-list">
                                                <label class="checkbox-list">
                                                    <span><input type="checkbox" ng-model="item.IS_SELECT_FLR" ng-change="FloorChange(item.HR_PROD_FLR_ID,item.IS_SELECT_FLR)"></span> {{item.FLOOR_DESC_EN}}
                                                </label>
                                            </div>
                                        </td>
                                        @*<td style="width: 50%;">
                                                <div class="checkbox-list">
                                                    <label class="checkbox-list">
                                                        <span><input type="checkbox" ng-model="item.IS_SELECT_LINE"></span> {{item.LINE_CODE}}
                                                    </label>
                                                </div>
                                            </td>*@
                                    </tr>
                                </tbody>
                            </table>

                        </div>
                        <div class="row" style="margin:auto;">
                            <div class="col-md-12">
                                <button type="button" class="btn btn-sm green" ng-click="save(lineList)">Save</button>
                                <button type="button" class="btn btn-sm default" ng-click="close()">Close</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</script>